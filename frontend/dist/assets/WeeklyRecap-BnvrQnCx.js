import{d as h,u as b,c as v,r as c,a as f,j as e,A as j,T as k,L as S}from"./index-BY6vNrGT.js";import{L as z}from"./LoadingRunner-e_BIMidb.js";import{A as R,a as W}from"./arrow-up-right-BTXJoPhS.js";import{Z as T}from"./zap-FSPYm_Tl.js";import{F as m}from"./flame-DJC58tZl.js";import{T as w,C as B}from"./trending-up-Cudogpms.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],M=h("Target",A);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],E=h("Timer",L);function d({icon:r,label:o,value:t,sub:n,accent:p}){return e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)",borderRadius:16,padding:"16px",display:"flex",flexDirection:"column",gap:4},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[e.jsx(r,{size:16,color:p||"#EAB308"}),e.jsx("span",{style:{fontSize:11,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:1},children:o})]}),e.jsx("p",{style:{fontSize:28,fontWeight:900,color:"var(--text-primary)",lineHeight:1},children:t}),n&&e.jsx("p",{style:{fontSize:12,color:"var(--text-muted)",marginTop:2},children:n})]})}function V(){const{t:r}=b(),{fmt:o}=v(),[t,n]=c.useState(null),[p,u]=c.useState(!0),[i,y]=c.useState("week");if(c.useEffect(()=>{const s=i==="week"?"/recap/weekly":"/recap/monthly";u(!0),f.get(s).then(g=>n(g.data)).catch(()=>n(null)).finally(()=>u(!1))},[i]),p)return e.jsx(z,{message:r("recap.loading","Loading recap")});const l=t==null?void 0:t.vsLastWeek,a=l&&l.miles>=0,x=t!=null&&t.monthlyGoal?Math.min(100,Math.round(t.monthlyMiles/t.monthlyGoal*100)):0;return e.jsxs("div",{style:{paddingBottom:32},children:[e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("h1",{style:{fontSize:26,fontWeight:900,color:"var(--text-primary)",margin:0},children:r("recap.title","Weekly Recap")}),e.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",marginTop:4},children:i==="week"?r("recap.thisWeek","This Week"):r("recap.thisMonth","This Month")})]}),e.jsx("div",{style:{display:"flex",background:"var(--bg-card)",border:"1px solid var(--border-subtle)",borderRadius:12,padding:4,marginBottom:20,gap:4},children:[["week",r("recap.weekly","Weekly")],["month",r("recap.monthly","Monthly")]].map(([s,g])=>e.jsx("button",{onClick:()=>y(s),style:{flex:1,padding:"8px 0",borderRadius:9,border:"none",cursor:"pointer",fontWeight:700,fontSize:13,background:i===s?"#EAB308":"transparent",color:i===s?"#000":"var(--text-muted)",transition:"all 0.15s"},children:g},s))}),e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)",borderRadius:20,padding:"24px 20px",marginBottom:16,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:-20,right:-20,width:120,height:120,borderRadius:"50%",background:"rgba(234,179,8,0.08)"}}),e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:1.5,marginBottom:6},children:r("recap.totalMiles","Total Miles")}),e.jsx("p",{style:{fontSize:56,fontWeight:900,color:"var(--text-primary)",lineHeight:1,margin:0},children:o.distanceValue((t==null?void 0:t.totalMiles)||0).toFixed(1)}),e.jsx("p",{style:{fontSize:14,color:"var(--text-muted)",marginTop:4},children:o.distanceLabel}),l&&l.pct!==null&&e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:4,marginTop:12,background:a?"rgba(34,197,94,0.12)":"rgba(239,68,68,0.12)",borderRadius:8,padding:"4px 10px"},children:[a?e.jsx(R,{size:14,color:"#22c55e"}):e.jsx(W,{size:14,color:"#ef4444"}),e.jsxs("span",{style:{fontSize:13,fontWeight:700,color:a?"#22c55e":"#ef4444"},children:[a?"+":"",l.pct,"% ",r("recap.vsLastWeek","vs last week")]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16},children:[e.jsx(d,{icon:j,label:r("recap.totalRuns","Runs"),value:(t==null?void 0:t.totalRuns)??0,sub:r("recap.runsThisWeek","this period")}),e.jsx(d,{icon:T,label:r("recap.totalWorkouts","Workouts"),value:(t==null?void 0:t.totalWorkouts)??0,sub:r("recap.workoutsThisWeek","strength sessions")}),e.jsx(d,{icon:E,label:r("recap.activeMinutes","Active Time"),value:((t==null?void 0:t.totalMinutes)||0)>=60?`${Math.floor(((t==null?void 0:t.totalMinutes)||0)/60)}h ${((t==null?void 0:t.totalMinutes)||0)%60}m`:`${(t==null?void 0:t.totalMinutes)||0}m`,sub:r("recap.combined","runs + lifts")}),e.jsx(d,{icon:m,label:r("calories.burned","Calories"),value:((t==null?void 0:t.totalCalories)||0).toLocaleString(),sub:r("calories.burned","cal burned"),accent:"#EAB308"})]}),(t==null?void 0:t.avgPace)&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)",borderRadius:16,padding:"16px 20px",marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(w,{size:18,color:"#EAB308"}),e.jsx("p",{style:{fontSize:14,color:"var(--text-muted)",margin:0},children:r("recap.avgPace","Avg Pace")})]}),e.jsxs("p",{style:{fontSize:20,fontWeight:900,color:"var(--text-primary)",margin:0},children:[t.avgPace," ",e.jsx("span",{style:{fontSize:12,fontWeight:400,color:"var(--text-muted)"},children:"/mi"})]})]}),(t==null?void 0:t.bestRun)&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)",borderLeft:"4px solid #EAB308",borderRadius:16,padding:"16px 20px",marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[e.jsx(k,{size:16,color:"#EAB308"}),e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:1,margin:0},children:r("recap.bestRun","Best Run")})]}),e.jsxs("div",{style:{display:"flex",gap:24},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:22,fontWeight:900,color:"var(--text-primary)",margin:0},children:o.distanceValue(t.bestRun.miles).toFixed(2)}),e.jsx("p",{style:{fontSize:11,color:"var(--text-muted)"},children:o.distanceLabel})]}),t.bestRun.pace&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:22,fontWeight:900,color:"var(--text-primary)",margin:0},children:t.bestRun.pace}),e.jsx("p",{style:{fontSize:11,color:"var(--text-muted)"},children:"/mi pace"})]}),t.bestRun.date&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:14,fontWeight:700,color:"var(--text-muted)",margin:0},children:new Date(t.bestRun.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx("p",{style:{fontSize:11,color:"var(--text-muted)"},children:r("recap.date","date")})]})]})]}),(t==null?void 0:t.streak)>0&&e.jsxs("div",{style:{background:"rgba(234,179,8,0.08)",border:"1px solid rgba(234,179,8,0.3)",borderRadius:16,padding:"14px 18px",display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[e.jsx(m,{size:22,color:"#EAB308"}),e.jsxs("div",{children:[e.jsxs("p",{style:{fontSize:18,fontWeight:900,color:"#EAB308",margin:0},children:[t.streak," ",r("recap.streakDays","day streak")]}),e.jsx("p",{style:{fontSize:12,color:"var(--text-muted)",margin:0},children:r("recap.keepItUp","Keep the momentum going")})]})]}),i==="week"&&(t==null?void 0:t.monthlyMiles)!==void 0&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)",borderRadius:16,padding:"16px 20px",marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(M,{size:16,color:"#EAB308"}),e.jsx("p",{style:{fontSize:13,fontWeight:700,color:"var(--text-primary)",margin:0},children:r("recap.monthlyProgress","Monthly Progress")})]}),e.jsxs("p",{style:{fontSize:12,color:"var(--text-muted)",margin:0},children:[o.distanceValue(t.monthlyMiles).toFixed(1)," / ",o.distanceValue(t.monthlyGoal||50).toFixed(0)," ",o.distanceLabel]})]}),e.jsx("div",{style:{width:"100%",height:10,borderRadius:6,background:"var(--bg-base)",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${x}%`,borderRadius:6,background:x>=100?"#22c55e":"#EAB308",transition:"width 0.6s ease"}})}),e.jsxs("p",{style:{fontSize:11,color:"var(--text-muted)",marginTop:6},children:[x,"% ",r("recap.ofMonthlyGoal","of monthly goal")]})]}),!(t!=null&&t.totalRuns)&&!(t!=null&&t.totalWorkouts)&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)",borderRadius:16,padding:"32px 20px",textAlign:"center",marginBottom:16},children:[e.jsx(B,{size:32,color:"var(--text-muted)",style:{margin:"0 auto 12px"}}),e.jsx("p",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)"},children:r("recap.noData","No activity this period yet")}),e.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",marginTop:4},children:r("recap.logToSee","Log a run or workout to see your recap")})]}),e.jsx(S,{to:"/history",style:{display:"block",width:"100%",padding:"14px 0",borderRadius:14,textAlign:"center",background:"var(--bg-card)",border:"1px solid var(--border-subtle)",color:"var(--text-muted)",fontWeight:600,fontSize:14,textDecoration:"none"},children:r("recap.viewHistory","View Full History")})]})}export{V as default};
