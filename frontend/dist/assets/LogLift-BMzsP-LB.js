import{b as K,r as o,a as g,j as e}from"./index-xcBp2yTO.js";const Q=[{key:"chest",label:"Chest"},{key:"back",label:"Back"},{key:"legs",label:"Legs"},{key:"shoulders",label:"Shoulders"},{key:"arms",label:"Arms"},{key:"core",label:"Core"}],y="#374151",d="#EAB308";function R({highlight:i,sex:p="male"}){const b=u=>i==="full"||i===u?d:y,n=p==="female";return e.jsxs("svg",{viewBox:"0 0 60 90",width:"52",height:"78",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"30",cy:"9",r:"8",fill:y}),e.jsx("rect",{x:"27",y:"17",width:"6",height:"5",fill:y}),e.jsx("rect",{x:n?9:7,y:"20",width:"9",height:"24",rx:"4",fill:b("arms")}),e.jsx("rect",{x:n?42:44,y:"20",width:"9",height:"24",rx:"4",fill:b("arms")}),e.jsx("rect",{x:"16",y:"20",width:"28",height:"33",rx:"4",fill:y}),n&&e.jsx("rect",{x:"18",y:"34",width:"24",height:"8",rx:"2",fill:y}),(i==="shoulders"||i==="full")&&e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:n?9:7,y:"20",width:"9",height:"11",rx:"4",fill:d}),e.jsx("rect",{x:n?42:44,y:"20",width:"9",height:"11",rx:"4",fill:d}),e.jsx("rect",{x:"15",y:"20",width:"30",height:"8",rx:"3",fill:d})]}),(i==="chest"||i==="full")&&e.jsx("rect",{x:"18",y:"23",width:"24",height:"14",rx:"3",fill:d}),(i==="back"||i==="full")&&e.jsx("rect",{x:"16",y:"22",width:"28",height:"13",rx:"3",fill:d}),(i==="core"||i==="full")&&e.jsx("rect",{x:"18",y:"37",width:"24",height:"14",rx:"3",fill:d}),e.jsx("rect",{x:n?15:17,y:"53",width:n?13:11,height:"33",rx:"4",fill:b("legs")}),e.jsx("rect",{x:32,y:"53",width:n?13:11,height:"33",rx:"4",fill:b("legs")})]})}function Z(){const i=K(),[p,b]=o.useState([]),[n,u]=o.useState(!1),[w,h]=o.useState(""),[l,N]=o.useState(null),[S,O]=o.useState("male"),[C,P]=o.useState(""),[j,z]=o.useState(null),[f,U]=o.useState("ai"),[r,A]=o.useState(null),[F,E]=o.useState(!1),[v,$]=o.useState(null),[D,G]=o.useState(""),[x,H]=o.useState(null),[I,L]=o.useState(!1),[_,B]=o.useState("");o.useEffect(()=>{g.get("/auth/me").then(t=>{var s;O(((s=t.data.user)==null?void 0:s.sex)||"male")}).catch(()=>{})},[]);const m=p[0]||"";o.useEffect(()=>{E(!0),$(null),g.get("/ai/workout-recommendation?date=today").then(t=>{var s;A(((s=t.data)==null?void 0:s.recommendation)||null)}).catch(t=>{console.error("Failed to fetch AI recommendation:",t),$("Could not generate recommendation"),A(null)}).finally(()=>E(!1))},[]);const M=t=>b(s=>{const a=s.includes(t)?s.filter(k=>k!==t):[...s,t],c=a[0]||"";return l&&l.muscle_group!==c&&(N(null),G("")),a}),Y=async()=>{var t,s;u(!0),h("");try{const c=((r==null?void 0:r.target)||"").split(/[,\/\s]+/).map(J=>J.trim().toLowerCase()).filter(Boolean),k=await g.post("/workouts/start",{muscle_groups:c.length?c:["full"]});i(`/workout/active/${k.data.session.id}`,{state:{exercises:(r==null?void 0:r.main)||[],workoutName:(r==null?void 0:r.workoutName)||""}})}catch(a){h(((s=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:s.error)||"Could not start workout. Try again."),u(!1)}},V=async()=>{var t,s;u(!0),h("");try{const a=await g.post("/workouts/start",{muscle_groups:p,exercise_name:(l==null?void 0:l.name)||""});i(`/workout/active/${a.data.session.id}`)}catch(a){h(((s=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:s.error)||"Could not start workout. Try again."),u(!1)}},W=async()=>{var t,s,a;if(!(!m||!(l!=null&&l.name))){L(!0),B("");try{const c=await g.post("/ai/workout",{bodyPart:m,exercise:l.name});H(((t=c.data)==null?void 0:t.recommendation)||null)}catch(c){B(((a=(s=c==null?void 0:c.response)==null?void 0:s.data)==null?void 0:a.error)||"Could not generate AI workout")}finally{L(!1)}}},q=async()=>{var t,s;if(x){u(!0),h("");try{const a=[m||"full"],c=await g.post("/workouts/start",{muscle_groups:a,exercise_name:(l==null?void 0:l.name)||""});i(`/workout/active/${c.data.session.id}`,{state:{exercises:(x==null?void 0:x.main)||[],workoutName:(x==null?void 0:x.workoutName)||""}})}catch(a){h(((s=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:s.error)||"Could not start workout. Try again."),u(!1)}}},T=(t="")=>String(t).replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase());return e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",style:{color:"var(--text-primary)"},children:"Start Workout"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Select the muscle groups you are targeting today"})]}),e.jsx("div",{className:"flex gap-2",children:["manual","ai"].map(t=>e.jsx("button",{onClick:()=>U(t),className:"rounded-full px-4 py-2 text-xs font-bold",style:{background:f===t?"var(--accent)":"var(--bg-input)",color:f===t?"#000":"var(--text-muted)"},children:t==="manual"?"Manual":"AI Recommends"},t))}),f==="ai"&&e.jsxs(e.Fragment,{children:[F&&e.jsx("div",{className:"rounded-2xl p-4",style:{background:"var(--bg-card)",color:"var(--text-muted)"},children:e.jsx("p",{className:"text-sm",children:"Generating your personalized workout..."})}),v&&e.jsx("div",{className:"rounded-2xl p-4",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444",border:"1px solid rgba(239,68,68,0.3)"},children:e.jsx("p",{className:"text-sm",children:v})}),!F&&!r&&!v&&e.jsx("div",{className:"rounded-2xl p-4",style:{background:"var(--bg-card)",color:"var(--text-muted)"},children:e.jsx("p",{className:"text-sm",children:"No recommendation available yet. Check back later."})}),r&&e.jsxs("div",{className:"rounded-2xl p-4",style:{background:"#F5F0E8",color:"#1a1a2e",border:"1px solid #d6c9a0",position:"relative",fontFamily:"Caveat, cursive",backgroundImage:"repeating-linear-gradient(to bottom, transparent 0 27px, rgba(26,26,46,0.12) 27px 28px)"},children:[e.jsx("div",{style:{position:"absolute",top:8,right:10,fontSize:11,fontWeight:700,border:"1px solid #1a1a2e66",borderRadius:999,padding:"2px 8px"},children:"FORGE"}),e.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:-1,height:14,background:"linear-gradient(135deg, #eadfcd 25%, transparent 25%) 0 0/12px 12px, linear-gradient(225deg, #eadfcd 25%, transparent 25%) 6px 0/12px 12px"}}),e.jsxs("p",{className:"text-lg font-bold",children:[r.workoutName," — ",T(r.target)]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Warmup:"})," ",(r.warmup||[]).join(", ")]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Main:"})," ",(r.main||[]).map(t=>`${t.name} ${t.sets}x${t.reps} (${t.rest})`).join(" • ")]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Recovery:"})," ",(r.recovery||[]).join(", ")]}),e.jsx("p",{className:"text-sm mt-2",children:r.explanation}),e.jsx("p",{className:"text-xs mt-1",children:r.restExplanation}),e.jsx("button",{onClick:Y,disabled:n,className:"mt-3 w-full rounded-2xl py-4 text-base font-bold",style:{background:"var(--accent)",color:"#000",border:"none",cursor:"pointer",opacity:n?.6:1,fontFamily:"inherit"},children:n?"Starting...":"Start Workout"})]})]}),f==="manual"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[Q.map(({key:t,label:s})=>{const a=p.includes(t);return e.jsxs("button",{onClick:()=>M(t),className:"flex flex-col items-center justify-between rounded-2xl py-3 px-2 transition-all",style:{background:a?"rgba(234,179,8,0.08)":"var(--bg-card)",border:`2px solid ${a?d:"var(--border-subtle)"}`,minHeight:110,boxShadow:a?"0 0 10px rgba(234,179,8,0.25)":"none"},children:[e.jsx(R,{highlight:t,sex:S}),e.jsx("span",{className:"text-xs font-semibold mt-1 capitalize",style:{color:a?d:"var(--text-muted)"},children:s})]},t)}),(()=>{const t=p.includes("full");return e.jsxs("button",{onClick:()=>M("full"),className:"col-span-3 flex items-center justify-center gap-4 rounded-2xl py-3 px-4 transition-all",style:{background:t?"rgba(234,179,8,0.08)":"var(--bg-card)",border:`2px solid ${t?d:"var(--border-subtle)"}`,minHeight:72,boxShadow:t?"0 0 10px rgba(234,179,8,0.25)":"none"},children:[e.jsx(R,{highlight:"full",sex:S}),e.jsx("span",{className:"text-sm font-bold",style:{color:t?d:"var(--text-muted)"},children:"Full Body"})]})})()]}),m&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"How much time do you have?"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["15","30","45","60","90+"].map(t=>e.jsxs("button",{type:"button",onClick:async()=>{var a;P(t);const s=await g.post("/ai/lift-plan",{bodyPart:m,timeAvailable:t,userId:"me"}).catch(()=>null);z(((a=s==null?void 0:s.data)==null?void 0:a.plan)||null)},className:"rounded-full px-3 py-1 text-xs font-semibold",style:{background:C===t?"var(--accent)":"var(--bg-input)",color:C===t?"#000":"var(--text-muted)"},children:[t," min"]},t))}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Exercise"}),e.jsx("input",{value:D,onChange:t=>{G(t.target.value),N(t.target.value?{name:t.target.value,muscle_group:m}:null)},placeholder:"e.g. Incline Dumbbell Press",className:"w-full mt-1 rounded-xl px-3 py-2",style:{background:"var(--bg-input)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"}})]}),l&&e.jsxs("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:["Exercise: ",l.name]}),j&&e.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:[j.workoutName," · Estimated: ",j.estimatedTime]}),m&&(l==null?void 0:l.name)&&e.jsx("button",{type:"button",onClick:W,disabled:I,className:"rounded-xl px-4 py-2 text-sm font-bold",style:{background:"#EAB308",color:"#000",border:"none"},children:I?"Generating...":`Generate AI Workout for ${T(m)}`}),_&&e.jsx("p",{className:"text-xs",style:{color:"#ef4444"},children:_}),x&&e.jsxs("div",{className:"rounded-2xl p-4",style:{background:"#F5F0E8",color:"#1a1a2e",border:"1px solid #d6c9a0",position:"relative",fontFamily:"Caveat, cursive",backgroundImage:"repeating-linear-gradient(to bottom, transparent 0 27px, rgba(26,26,46,0.12) 27px 28px)"},children:[e.jsx("div",{style:{position:"absolute",top:8,right:10,fontSize:11,fontWeight:700,border:"1px solid #1a1a2e66",borderRadius:999,padding:"2px 8px"},children:"FORGE"}),e.jsx("p",{className:"text-lg font-bold",children:x.workoutName}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Main:"})," ",(x.main||[]).map(t=>`${t.name} ${t.sets}x${t.reps} (${t.rest})`).join(" • ")]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:q,className:"flex-1 rounded-xl py-2 font-bold",style:{background:"var(--accent)",color:"#000",border:"none",fontFamily:"inherit"},children:"Accept Workout"}),e.jsx("button",{type:"button",onClick:W,className:"flex-1 rounded-xl py-2 font-bold",style:{background:"var(--bg-input)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)",fontFamily:"inherit"},children:"Regenerate"})]})]})]}),w&&e.jsx("p",{className:"text-sm",style:{color:"var(--accent)"},children:w}),e.jsx("button",{onClick:V,disabled:n||p.length===0,className:"w-full rounded-2xl py-4 text-lg font-bold disabled:opacity-60 transition-all",style:{background:"var(--accent)",color:"black"},children:n?"Starting...":"Begin Workout"})]})]})}export{Z as default};
