import{i as j,b as N,r as t,j as e,a as k}from"./index-Bez5XITZ.js";function P(){const[y]=j(),n=N(),o=y.get("token")||"",[r,b]=t.useState(""),[c,f]=t.useState(""),[d,a]=t.useState(""),[w,g]=t.useState(!1),[i,u]=t.useState(!1);async function v(s){var x,h;if(s.preventDefault(),a(""),r!==c)return a("Passwords do not match.");if(r.length<6)return a("Password must be at least 6 characters.");u(!0);try{await k.post("/auth/reset-password",{token:o,password:r}),g(!0)}catch(l){a(((h=(x=l==null?void 0:l.response)==null?void 0:x.data)==null?void 0:h.error)||"Reset failed. The link may have expired.")}finally{u(!1)}}const m={borderColor:"var(--border-subtle)",background:"var(--bg-input)",color:"var(--text-primary)"},p={background:"var(--accent)",color:"black"};return e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",style:{background:"var(--bg-base)",color:"var(--text-primary)"},children:e.jsx("div",{className:"w-full max-w-[420px] rounded-2xl border p-6 shadow-xl",style:{borderColor:"var(--border-subtle)",background:"var(--bg-card)"},children:w?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mb-2 text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Password Updated"}),e.jsx("p",{className:"mb-6 text-sm",style:{color:"var(--text-muted)"},children:"You can now sign in with your new password."}),e.jsx("button",{onClick:()=>n("/login"),className:"w-full rounded-xl py-3 font-semibold transition hover:opacity-90",style:p,children:"Go to Sign In"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mb-1 text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Set New Password"}),e.jsx("p",{className:"mb-6 text-sm",style:{color:"var(--text-muted)"},children:"Choose a new password for your account."}),!o&&e.jsx("p",{className:"mb-4 text-sm",style:{color:"var(--accent)"},children:"Missing reset token. Please use the link from the console."}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx("input",{type:"password",required:!0,placeholder:"New password",className:"w-full rounded-xl border px-4 py-3 outline-none placeholder:text-gray-500 focus:ring-2",style:m,value:r,onChange:s=>b(s.target.value)}),e.jsx("input",{type:"password",required:!0,placeholder:"Confirm new password",className:"w-full rounded-xl border px-4 py-3 outline-none placeholder:text-gray-500 focus:ring-2",style:m,value:c,onChange:s=>f(s.target.value)}),d&&e.jsx("p",{className:"text-sm",style:{color:"var(--accent)"},children:d}),e.jsx("button",{type:"submit",disabled:i||!o,className:"w-full rounded-xl py-3 font-semibold transition hover:opacity-90 disabled:opacity-70",style:p,children:i?"Updating...":"Set New Password"})]}),e.jsx("button",{type:"button",onClick:()=>n("/login"),className:"mt-4 w-full text-sm hover:underline",style:{color:"var(--text-muted)"},children:"Back to sign in"})]})})})}export{P as default};
