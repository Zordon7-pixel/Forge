import{d as $,r as s,a as o,j as e}from"./index-BY6vNrGT.js";import We from"./PRWall-VE4wvq2b.js";import Me from"./Badges-Dej6i3Mu.js";import{L as De}from"./LoadingRunner-e_BIMidb.js";import{X as ie}from"./x-BDpRvfbL.js";import{c as Ee,s as Ie}from"./validation-CCcprX5w.js";import{C as Le}from"./camera-CWlgv3dS.js";import{H as $e}from"./heart-BrXBVFdt.js";import{M as Fe}from"./message-circle-Juy_OI7m.js";import{F as Be}from"./flame-DJC58tZl.js";import{F as Ae}from"./footprints-4_7gh1K0.js";import{C as Pe}from"./circle-check-5-x0qrih.js";import"./pencil-xhxwYFnI.js";import"./AchievementUnlock-DOduJROf.js";import"./mountain-DYkqyRdb.js";import"./zap-FSPYm_Tl.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],le=$("ChevronDown",Ue);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],oe=$("ChevronUp",Ge);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],He=$("Send",Ve);function Oe({activityId:i,activityType:p,onClose:u}){const[b,w]=s.useState([]),[x,m]=s.useState(""),[W,f]=s.useState(!1),C=s.useRef(null);s.useEffect(()=>{o.get(`/social/${p}/${i}/comments`).then(n=>{w(n.data.comments||[])})},[i,p]),s.useEffect(()=>{var n;(n=C.current)==null||n.scrollIntoView({behavior:"smooth"})},[b]);const v=async()=>{if(x.trim()){f(!0);try{const n=await o.post(`/social/${p}/${i}/comments`,{content:x.trim()});w(j=>[...j,n.data.comment]),m("")}catch{}finally{f(!1)}}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end",style:{background:"rgba(0,0,0,0.7)"},onClick:u,children:e.jsxs("div",{className:"w-full rounded-t-2xl flex flex-col",style:{background:"var(--bg-card)",maxHeight:"70vh"},onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b",style:{borderColor:"var(--border-subtle)"},children:[e.jsx("span",{className:"font-bold text-sm",style:{color:"var(--text-primary)"},children:"Comments"}),e.jsx("button",{onClick:u,children:e.jsx(ie,{size:18,style:{color:"var(--text-muted)"}})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-3 space-y-4",children:[b.length===0&&e.jsx("p",{className:"text-center py-8 text-sm",style:{color:"var(--text-muted)"},children:"No comments yet. Be the first."}),b.map(n=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{style:{width:28,height:28,borderRadius:"50%",background:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900,fontSize:11,color:"#000",flexShrink:0},children:(n.user_name||"A")[0].toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-xs font-bold",style:{color:"var(--text-primary)"},children:n.user_name}),e.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:new Date(n.created_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),e.jsx("p",{className:"text-sm mt-0.5",style:{color:"var(--text-muted)"},children:n.content})]})]},n.id)),e.jsx("div",{ref:C})]}),e.jsxs("div",{className:"px-4 py-3 border-t flex gap-2 items-center",style:{borderColor:"var(--border-subtle)"},children:[e.jsx("input",{value:x,onChange:n=>m(n.target.value),onKeyDown:n=>n.key==="Enter"&&v(),placeholder:"Add a comment...",maxLength:280,className:"flex-1 rounded-xl px-3 py-2 text-sm",style:{background:"var(--bg-input)",border:"1px solid var(--border-subtle)",color:"var(--text-primary)"}}),e.jsx("button",{onClick:v,disabled:W||!x.trim(),style:{background:"var(--accent)",border:"none",borderRadius:10,padding:"8px 14px",cursor:"pointer"},children:e.jsx(He,{size:14,color:"#000"})})]})]})})}function Je({src:i,onClose:p}){return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.95)"},onClick:p,children:[e.jsx("button",{className:"absolute top-5 right-5",onClick:p,children:e.jsx(ie,{size:24,color:"white"})}),e.jsx("img",{src:i,alt:"Activity photo",style:{maxWidth:"100%",maxHeight:"90vh",objectFit:"contain",borderRadius:12},onClick:u=>u.stopPropagation()})]})}function T(i,p){return p==="miles"?`${Number(i).toFixed(i%1===0?0:1)} miles`:p==="steps"?`${Math.round(i).toLocaleString()} steps`:`${Math.round(i)} days`}function ct(){const[i,p]=s.useState("challenges"),[u,b]=s.useState(null),[w,x]=s.useState(!0),[m,W]=s.useState([]),[f,C]=s.useState([]),[v,n]=s.useState({steps:0,goal:1e4,date:""}),[j,de]=s.useState({days:[],weekTotal:0,goal:1e4}),[ce,F]=s.useState(!1),[B,A]=s.useState(""),[pe,ue]=s.useState(null),[P,xe]=s.useState(!0),[U,M]=s.useState([]),[G,V]=s.useState(null),[D,H]=s.useState(null),[O,E]=s.useState(null),[J,me]=s.useState({}),[Y,q]=s.useState(!1),[l,g]=s.useState({name:"",type:"running",target_value:"",target_date:"",description:""}),[I,K]=s.useState(!1),[k,ge]=s.useState(null),[h,X]=s.useState({}),Q=s.useRef(null),Z=s.useRef(null),ee=s.useRef(null),S=[{type:"running",label:"Running",unit:"miles",placeholder:"e.g. 50",hint:"Total miles to run"},{type:"walking",label:"Walking",unit:"miles",placeholder:"e.g. 30",hint:"Total miles to walk"},{type:"steps",label:"Steps",unit:"steps",placeholder:"e.g. 100000",hint:"Total steps to hit"},{type:"gym_time",label:"Gym Time",unit:"minutes",placeholder:"e.g. 600",hint:"Total minutes in the gym"},{type:"streak",label:"Workout Streak",unit:"days",placeholder:"e.g. 30",hint:"Consecutive active days"},{type:"elevation",label:"Elevation Climb",unit:"feet",placeholder:"e.g. 10000",hint:"Total feet of elevation gain"},{type:"workouts",label:"Most Workouts",unit:"sessions",placeholder:"e.g. 20",hint:"Total workout sessions"},{type:"custom",label:"Custom",unit:"units",placeholder:"e.g. 100",hint:"Your own challenge metric"}];async function he(){const a=S.find(c=>c.type===l.type),{errors:d}=Ee({name:l.name,targetValue:l.target_value,targetDate:l.target_date});if(X(d),Object.keys(d).length){Ie({name:Q,target_value:Z,target_date:ee},["name","target_value","target_date"]);return}K(!0);try{await o.post("/challenges/create",{name:l.name,description:l.description,type:l.type,target_value:Number(l.target_value),target_date:l.target_date,unit:(a==null?void 0:a.unit)||"units"}),q(!1),g({name:"",type:"running",target_value:"",target_date:"",description:""}),X({}),await _()}finally{K(!1)}}async function _(){var a,d,c,t,r;x(!0);try{const[N,y,Se,Ne,we,L,Ce,_e]=await Promise.all([o.get("/challenges"),o.get("/challenges/my"),o.get("/challenges/steps/today"),o.get("/challenges/steps/week"),o.get("/challenges/feed"),o.get("/runs"),o.get("/users/goal").catch(()=>({data:{}})),o.get("/auth/me/streak").catch(()=>({data:{}}))]);W(((a=N.data)==null?void 0:a.challenges)||[]),C(((d=y.data)==null?void 0:d.challenges)||[]),n(Se.data||{steps:0,goal:1e4,date:""}),de(Ne.data||{days:[],weekTotal:0,goal:1e4}),M(((c=we.data)==null?void 0:c.feed)||[]),V(new Date),ge(_e.data||{});const ze=Array.isArray(L.data)?L.data:((t=L.data)==null?void 0:t.runs)||[],se=new Date,Re=se.getMonth(),Te=se.getFullYear(),re=ze.filter(z=>{const R=new Date((z.date||z.created_at||"")+"T12:00:00");return R.getMonth()===Re&&R.getFullYear()===Te}).reduce((z,R)=>z+Number(R.distance_miles||0),0),ne=Number(((r=Ce.data)==null?void 0:r.miles)||100);b({miles:re,goal:ne,pct:Math.min(100,re/ne*100)})}finally{x(!1)}}async function te(){var a;try{const d=await o.get("/challenges/feed");M(((a=d.data)==null?void 0:a.feed)||[]),V(new Date)}catch{}}const ye=async a=>{try{const d=await o.post("/social/like",{activity_id:a.id,activity_type:a._type});M(c=>c.map(t=>t.id===a.id?{...t,user_liked:d.data.liked,like_count:d.data.count}:t))}catch{}},be=async a=>{var d;if(J[a.id]){E(J[a.id]);return}try{const c=await o.get(`/social/${a._type}/${a.id}/photo`);(d=c.data.media)!=null&&d.data&&(me(t=>({...t,[a.id]:c.data.media.data})),E(c.data.media.data))}catch{}};s.useEffect(()=>{_();const a=setInterval(te,24*60*60*1e3);return()=>clearInterval(a)},[]);const fe=s.useMemo(()=>m.filter(a=>a.is_featured),[m]),ve=s.useMemo(()=>m.filter(a=>!a.joined),[m]);async function ae(a){await o.post(`/challenges/${a}/join`,{}),await o.post("/challenges/sync",{}),await _()}async function je(){const a=Number(B);!Number.isFinite(a)||a<0||(await o.post("/challenges/steps",{steps:a}),await o.post("/challenges/sync",{}),A(""),F(!1),await _())}function ke(){var a,d,c;return w?e.jsx(De,{message:"Loading challenges"}):e.jsxs("div",{className:"space-y-5",children:[k!==null&&e.jsx("div",{className:"rounded-2xl p-4 mb-2",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{size:22,color:"#EAB308"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-black",style:{color:"var(--text-primary)"},children:k.currentStreak>0?`${k.currentStreak}-day streak`:"Start your streak today"}),k.bestStreak>0&&e.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:["Best: ",k.bestStreak," days"]})]})]})}),e.jsxs("section",{children:[e.jsx("h3",{className:"mb-3 text-sm font-bold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Featured Courses"}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:fe.map(t=>{const r=Math.min(100,Number(t.progress||0)/Number(t.target_value||1)*100);return e.jsxs("div",{className:"group relative flex-shrink-0 rounded-xl p-3",style:{width:100,minHeight:112,border:`2px solid ${t.badge_color||"var(--accent)"}`,background:"var(--bg-card)"},children:[e.jsx("div",{className:"flex items-center justify-center rounded-xl",style:{height:56,background:"var(--bg-input)"},children:e.jsx("span",{className:"text-lg font-black",style:{color:t.badge_color||"var(--accent)"},children:t.unit==="miles"?Number(t.target_value).toFixed(t.target_value%1===0?0:1):Math.round(t.target_value/1e3)})}),e.jsx("p",{className:"mt-2 text-[11px] font-bold leading-tight",style:{color:"var(--text-primary)"},children:t.name}),e.jsx("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:T(t.target_value,t.unit)}),t.joined?e.jsxs("p",{className:"mt-1 text-[10px] font-semibold",style:{color:"var(--accent)"},children:[Math.round(r),"% complete"]}):e.jsx("button",{onClick:()=>ae(t.id),className:"absolute inset-x-2 bottom-2 rounded-lg px-2 py-1 text-[10px] font-bold opacity-100 transition group-hover:opacity-100",style:{background:"var(--accent)",color:"#000"},children:"Join"})]},t.id)})})]}),u&&e.jsxs("section",{className:"rounded-2xl p-4",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider mb-2",style:{color:"var(--text-muted)"},children:"Monthly Challenge"}),e.jsxs("p",{className:"text-xl font-black",style:{color:"var(--text-primary)"},children:[u.miles.toFixed(1)," / ",u.goal," miles"]}),e.jsx("div",{className:"h-2 rounded-full mt-2",style:{background:"var(--bg-input)"},children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${u.pct}%`,background:"var(--accent)"}})})]}),e.jsxs("section",{className:"rounded-2xl p-4",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(Ae,{size:16,style:{color:"var(--accent)"}}),e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Steps This Week"})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Today"}),e.jsxs("p",{className:"text-2xl font-black",style:{color:"var(--text-primary)"},children:[Number(v.steps||0).toLocaleString()," steps"]}),e.jsxs("p",{className:"mb-3 text-xs",style:{color:"var(--text-muted)"},children:["Goal: ",Number(v.goal||1e4).toLocaleString()]}),e.jsx("div",{className:"mb-3 flex items-end gap-2",children:(j.days||[]).map(t=>{const r=Math.min(1,(t.steps||0)/(t.goal||j.goal||1e4)),N=Math.max(8,Math.round(r*60)),y=(t.steps||0)>=(t.goal||j.goal||1e4);return e.jsxs("div",{className:"flex flex-1 flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full rounded-md",style:{height:N,background:y?"#22c55e":"#EAB308",minWidth:10},title:`${t.date}: ${t.steps}`}),e.jsx("span",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:t.date.slice(5)})]},t.date)})}),ce?e.jsxs("div",{className:"flex items-center gap-2 rounded-xl p-2",style:{background:"var(--bg-input)"},children:[e.jsx("input",{type:"number",placeholder:"Steps today",value:B,onChange:t=>A(t.target.value),className:"flex-1 rounded-lg px-3 py-2 text-sm",style:{background:"var(--bg-card)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"}}),e.jsx("button",{className:"rounded-lg px-3 py-2 text-xs font-bold",style:{background:"var(--accent)",color:"#000"},onClick:je,children:"Save"})]}):e.jsx("button",{className:"rounded-xl px-3 py-2 text-xs font-bold",style:{background:"var(--accent)",color:"#000"},onClick:()=>F(!0),children:"Log today's steps"}),e.jsx("p",{className:"mt-2 text-xs",style:{color:"var(--text-muted)"},children:"Connect Garmin to sync automatically"})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"mb-3 text-sm font-bold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"My Challenges"}),e.jsxs("div",{className:"space-y-2",children:[f.length===0&&e.jsx("div",{className:"rounded-xl p-3 text-sm",style:{background:"var(--bg-card)",color:"var(--text-muted)"},children:"Join a challenge to start tracking progress."}),f.map(t=>{const r=Math.min(100,Number(t.progress||0)/Number(t.target_value||1)*100),N=!!t.completed_at||r>=100,y=pe===t.id;return e.jsxs("button",{onClick:()=>ue(y?null:t.id),className:"w-full rounded-xl p-3 text-left",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-sm font-bold",style:{color:"var(--text-primary)"},children:t.name}),N&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-semibold",style:{color:"#22c55e"},children:[e.jsx(Pe,{size:14}),t.completed_at?new Date(t.completed_at).toLocaleDateString():"Completed"]})]}),e.jsx("div",{className:"h-2 w-full rounded-full",style:{background:"var(--bg-input)"},children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${r}%`,background:"var(--accent)"}})}),e.jsxs("p",{className:"mt-2 text-xs",style:{color:"var(--text-muted)"},children:[T(t.progress||0,t.unit)," of ",T(t.target_value,t.unit)," • ",Math.round(r),"% complete"]}),y&&e.jsx("p",{className:"mt-2 text-xs leading-relaxed",style:{color:"var(--text-muted)"},children:t.description})]},t.id)})]})]}),e.jsxs("section",{className:"rounded-xl",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("button",{onClick:()=>xe(t=>!t),className:"flex w-full items-center justify-between p-3",style:{color:"var(--text-primary)"},children:[e.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Browse All"}),P?e.jsx(oe,{size:16}):e.jsx(le,{size:16})]}),P&&e.jsx("div",{className:"space-y-2 px-3 pb-3",children:ve.map(t=>e.jsx("div",{className:"rounded-lg p-3",style:{background:"var(--bg-input)"},children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:t.name}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:T(t.target_value,t.unit)})]}),e.jsx("button",{onClick:()=>ae(t.id),className:"rounded-lg px-3 py-1.5 text-xs font-bold",style:{background:"var(--accent)",color:"#000"},children:"Join"})]})},t.id))})]}),e.jsxs("section",{style:{borderRadius:14,border:"1px solid var(--border-subtle)",overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>q(t=>!t),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"var(--bg-card)",border:"none",cursor:"pointer"},children:[e.jsx("span",{style:{fontSize:13,fontWeight:700,color:"var(--text-primary)"},children:"Create a Challenge"}),Y?e.jsx(oe,{size:16,color:"var(--text-muted)"}):e.jsx(le,{size:16,color:"var(--text-muted)"})]}),Y&&e.jsxs("div",{style:{background:"var(--bg-card)",padding:"0 16px 20px",display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:10},children:"Challenge Type"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:S.map(t=>e.jsx("button",{onClick:()=>g(r=>({...r,type:t.type,name:r.name||t.label+" Challenge"})),style:{padding:"7px 14px",borderRadius:20,fontSize:12,fontWeight:700,border:"none",cursor:"pointer",background:l.type===t.type?"var(--accent)":"var(--bg-input)",color:l.type===t.type?"#000":"var(--text-muted)"},children:t.label},t.type))}),e.jsx("p",{style:{fontSize:11,color:"var(--text-muted)",marginTop:6},children:(a=S.find(t=>t.type===l.type))==null?void 0:a.hint})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:6},children:"Challenge Name"}),e.jsx("input",{value:l.name,onChange:t=>g(r=>({...r,name:t.target.value})),placeholder:"Name your challenge",style:{width:"100%",background:"var(--bg-input)",border:"1px solid var(--border-subtle)",borderRadius:10,padding:"10px 12px",fontSize:14,color:"var(--text-primary)",boxSizing:"border-box"}}),h.name&&e.jsx("p",{ref:Q,style:{fontSize:12,color:"#ef4444",marginTop:6},children:h.name})]}),e.jsxs("div",{children:[e.jsxs("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:6},children:["Target (",(d=S.find(t=>t.type===l.type))==null?void 0:d.unit,")"]}),e.jsx("input",{type:"number",value:l.target_value,onChange:t=>g(r=>({...r,target_value:t.target.value})),placeholder:(c=S.find(t=>t.type===l.type))==null?void 0:c.placeholder,style:{width:"100%",background:"var(--bg-input)",border:"1px solid var(--border-subtle)",borderRadius:10,padding:"10px 12px",fontSize:14,color:"var(--text-primary)",boxSizing:"border-box"}}),h.target_value&&e.jsx("p",{ref:Z,style:{fontSize:12,color:"#ef4444",marginTop:6},children:h.target_value})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:6},children:"Target Date"}),e.jsx("input",{type:"date",value:l.target_date,onChange:t=>g(r=>({...r,target_date:t.target.value})),style:{width:"100%",background:"var(--bg-input)",border:"1px solid var(--border-subtle)",borderRadius:10,padding:"10px 12px",fontSize:14,color:"var(--text-primary)",boxSizing:"border-box"}}),h.target_date&&e.jsx("p",{ref:ee,style:{fontSize:12,color:"#ef4444",marginTop:6},children:h.target_date})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:6},children:"Description (optional)"}),e.jsx("textarea",{rows:2,value:l.description,onChange:t=>g(r=>({...r,description:t.target.value})),placeholder:"What's this challenge about?",style:{width:"100%",background:"var(--bg-input)",border:"1px solid var(--border-subtle)",borderRadius:10,padding:"10px 12px",fontSize:14,color:"var(--text-primary)",boxSizing:"border-box",resize:"none"}})]}),e.jsx("button",{onClick:he,disabled:I,style:{width:"100%",background:"var(--accent)",color:"#000",fontWeight:900,borderRadius:12,padding:"14px",border:"none",cursor:"pointer",fontSize:15,opacity:I?.6:1},children:I?"Creating...":"Create Challenge"})]})]})]})}return e.jsxs("div",{className:"rounded-2xl p-4",style:{background:"var(--bg-card)"},children:[e.jsx("div",{style:{display:"flex",gap:8,marginBottom:20},children:["challenges","prs","badges","feed"].map(a=>e.jsx("button",{onClick:()=>p(a),style:{padding:"8px 14px",borderRadius:20,fontSize:13,fontWeight:700,border:"none",cursor:"pointer",background:i===a?"var(--accent)":"var(--bg-card)",color:i===a?"#000":"var(--text-muted)"},children:a==="challenges"?"Challenges":a==="prs"?"PRs":a==="badges"?"Badges":"Feed"},a))}),i==="challenges"&&ke(),i==="prs"&&e.jsx(We,{}),i==="badges"&&e.jsx(Me,{}),i==="feed"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase"},children:"Community Activity"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[G&&e.jsxs("span",{style:{fontSize:10,color:"var(--text-muted)"},children:["Updated ",G.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),e.jsx("button",{onClick:te,style:{fontSize:10,fontWeight:700,color:"var(--accent)",background:"var(--accent-dim)",border:"none",borderRadius:6,padding:"3px 8px",cursor:"pointer"},children:"Refresh"})]})]}),U.length===0&&e.jsx("div",{style:{textAlign:"center",padding:32,color:"var(--text-muted)",fontSize:14},children:"No activity yet. Log a run or workout to show up here."}),U.map(a=>e.jsxs("div",{style:{background:"var(--bg-base)",borderRadius:10,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{width:28,height:28,borderRadius:"50%",background:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900,fontSize:11,color:"#000",flexShrink:0},children:(a.user_name||"A")[0].toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a.user_name||"Athlete"}),e.jsx("span",{style:{fontSize:11,color:"var(--text-muted)",flexShrink:0},children:a._type==="run"?`ran ${a.distance_miles?Number(a.distance_miles).toFixed(1)+" mi":""}${a.duration_seconds>0?" · "+Math.floor(a.duration_seconds/60)+"min":""}`:`logged ${a.set_count||0} sets`})]}),a.notes&&e.jsx("p",{style:{fontSize:10,color:"var(--text-muted)",marginTop:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a.notes})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",flexShrink:0,gap:2},children:[e.jsx("span",{style:{fontSize:9,fontWeight:700,color:"var(--accent)",background:"var(--accent-dim)",padding:"2px 6px",borderRadius:5,textTransform:"uppercase"},children:a._type==="run"?a.surface||"Run":"Lift"}),e.jsx("span",{style:{fontSize:9,color:"var(--text-muted)"},children:new Date(a._ts).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),a.has_photo&&e.jsx("div",{style:{padding:"0 12px 8px"},children:e.jsxs("button",{onClick:()=>be(a),style:{width:"100%",background:"var(--bg-input)",border:"none",borderRadius:8,padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:"pointer"},children:[e.jsx(Le,{size:12,style:{color:"var(--accent)"}}),e.jsx("span",{style:{fontSize:11,color:"var(--accent)",fontWeight:600},children:"View photo"})]})}),e.jsxs("div",{style:{borderTop:"1px solid var(--border-subtle)",display:"flex",alignItems:"center",padding:"6px 12px",gap:16},children:[e.jsxs("button",{onClick:()=>ye(a),style:{display:"flex",alignItems:"center",gap:4,background:"none",border:"none",cursor:"pointer",padding:"2px 0"},children:[e.jsx($e,{size:14,fill:a.user_liked?"#EAB308":"none",style:{color:a.user_liked?"#EAB308":"var(--text-muted)",transition:"all 0.15s"}}),e.jsx("span",{style:{fontSize:11,color:a.user_liked?"var(--accent)":"var(--text-muted)",fontWeight:a.user_liked?700:400},children:a.like_count||0})]}),e.jsxs("button",{onClick:()=>H({id:a.id,type:a._type}),style:{display:"flex",alignItems:"center",gap:4,background:"none",border:"none",cursor:"pointer",padding:"2px 0"},children:[e.jsx(Fe,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:11,color:"var(--text-muted)"},children:a.comment_count||0})]})]})]},a.id)),D&&e.jsx(Oe,{activityId:D.id,activityType:D.type,onClose:()=>H(null)}),O&&e.jsx(Je,{src:O,onClose:()=>E(null)})]})]})}export{ct as default};
