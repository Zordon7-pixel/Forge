import{r as a,j as e,A as R,a as c}from"./index-xcBp2yTO.js";import{T as m}from"./triangle-alert-Zm4z8z4-.js";import{C as j}from"./circle-check-CjLh77nJ.js";const A=["knee","hip","ankle","shin","calf","hamstring","lower back","shoulder","other"];function p(i){return i<=3?"#22c55e":i<=6?"#EAB308":"#ef4444"}function S(i){if(!i)return"";const[o,x,l]=i.split("-");return`${x}/${l}/${o}`}function T(){const i=new Date().toISOString().slice(0,10),[o,x]=a.useState([]),[l,z]=a.useState([]),[_,k]=a.useState(!0),[d,f]=a.useState(!1),[g,u]=a.useState(""),[r,n]=a.useState({body_part:"knee",pain_level:5,notes:"",date:i}),y=async()=>{try{const[t,s]=await Promise.all([c.get("/injury/active"),c.get("/injury")]);x(t.data.injuries||[]);const B=s.data.injuries||[];z(B.filter(I=>I.cleared===1))}catch{}k(!1)};a.useEffect(()=>{y()},[]);const w=async t=>{t.preventDefault(),f(!0);try{await c.post("/injury",{body_part:r.body_part,pain_level:Number(r.pain_level),notes:r.notes,date:r.date}),n({body_part:"knee",pain_level:5,notes:"",date:i}),u("Injury logged"),await y(),setTimeout(()=>u(""),2e3)}catch{u("Failed to log injury")}f(!1)},C=async t=>{try{await c.put(`/injury/${t}/clear`),await y()}catch{}},h={background:"var(--bg-card)",borderRadius:16,padding:20,marginBottom:12,border:"1px solid var(--border-subtle)"},v={fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:14,display:"flex",alignItems:"center",gap:6},b={background:"var(--bg-input)",border:"1px solid var(--border-subtle)",borderRadius:10,padding:"12px 14px",fontSize:14,color:"var(--text-primary)",width:"100%",boxSizing:"border-box"};return _?e.jsx("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,color:"var(--text-muted)"},children:"Loading..."}):e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:24,fontWeight:900,color:"var(--text-primary)",marginBottom:16},children:"Injury Log"}),e.jsxs("div",{style:h,children:[e.jsxs("div",{style:v,children:[e.jsx(m,{size:14,color:"#EAB308"}),"Active Injuries"]}),o.length===0?e.jsx("p",{style:{fontSize:14,color:"var(--text-muted)"},children:"No active injuries"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:o.map(t=>e.jsxs("div",{style:{background:"var(--bg-base)",borderRadius:12,padding:14,border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:15,fontWeight:700,color:"var(--text-primary)",textTransform:"capitalize"},children:String(t.body_part||"").replace(/_/g," ")}),e.jsxs("span",{style:{fontSize:12,fontWeight:700,color:"#000",background:p(t.pain_level),borderRadius:20,padding:"2px 10px"},children:["Pain ",t.pain_level,"/10"]})]}),e.jsx("span",{style:{fontSize:11,color:"var(--text-muted)"},children:S(t.date)})]}),t.notes&&e.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",marginBottom:10,lineHeight:1.4},children:t.notes}),e.jsxs("button",{onClick:()=>C(t.id),style:{display:"flex",alignItems:"center",gap:6,background:"rgba(34,197,94,0.1)",border:"1px solid rgba(34,197,94,0.3)",borderRadius:8,padding:"6px 12px",fontSize:13,fontWeight:600,color:"#22c55e",cursor:"pointer"},children:[e.jsx(j,{size:14}),"Mark Cleared"]})]},t.id))})]}),e.jsxs("div",{style:h,children:[e.jsxs("div",{style:v,children:[e.jsx(m,{size:14}),"Log New Injury"]}),e.jsxs("form",{onSubmit:w,style:{display:"flex",flexDirection:"column",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-muted)",display:"block",marginBottom:6},children:"Body Part"}),e.jsx("select",{value:r.body_part,onChange:t=>n(s=>({...s,body_part:t.target.value})),style:b,children:A.map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:12,color:"var(--text-muted)",display:"block",marginBottom:6},children:["Pain Level: ",e.jsxs("span",{style:{fontWeight:700,color:p(r.pain_level)},children:[r.pain_level,"/10"]})]}),e.jsx("input",{type:"range",min:1,max:10,step:1,value:r.pain_level,onChange:t=>n(s=>({...s,pain_level:Number(t.target.value)})),style:{width:"100%",accentColor:p(r.pain_level)}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:2},children:[e.jsx("span",{style:{fontSize:11,color:"#22c55e"},children:"1 Mild"}),e.jsx("span",{style:{fontSize:11,color:"#EAB308"},children:"5 Moderate"}),e.jsx("span",{style:{fontSize:11,color:"#ef4444"},children:"10 Severe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-muted)",display:"block",marginBottom:6},children:"Date"}),e.jsx("input",{type:"date",value:r.date,onChange:t=>n(s=>({...s,date:t.target.value})),style:b})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-muted)",display:"block",marginBottom:6},children:"Notes"}),e.jsx("textarea",{rows:3,placeholder:"Describe the injury, when it started, what aggravates it...",value:r.notes,onChange:t=>n(s=>({...s,notes:t.target.value})),style:{...b,resize:"vertical"}})]}),g&&e.jsx("p",{style:{fontSize:13,color:g.startsWith("Failed")?"#ef4444":"#22c55e"},children:g}),e.jsx("button",{type:"submit",disabled:d,style:{background:"#EAB308",color:"#000",border:"none",borderRadius:10,padding:"12px 0",fontSize:15,fontWeight:700,cursor:d?"not-allowed":"pointer",opacity:d?.7:1},children:d?"Logging...":"Log Injury"})]})]}),e.jsxs("div",{style:h,children:[e.jsxs("div",{style:v,children:[e.jsx(R,{size:14}),"Injury History"]}),l.length===0?e.jsx("p",{style:{fontSize:14,color:"var(--text-muted)"},children:"No injury history yet"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:l.map(t=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"var(--bg-base)",borderRadius:10,border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(j,{size:14,color:"#22c55e"}),e.jsx("span",{style:{fontSize:14,fontWeight:600,color:"var(--text-primary)",textTransform:"capitalize"},children:String(t.body_part||"").replace(/_/g," ")}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:"#000",background:p(t.pain_level),borderRadius:20,padding:"1px 8px"},children:[t.pain_level,"/10"]})]}),e.jsx("span",{style:{fontSize:12,color:"var(--text-muted)"},children:S(t.date)})]},t.id))})]})]})}export{T as default};
