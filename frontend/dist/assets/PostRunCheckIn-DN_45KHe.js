import{r as i,j as e,a as f}from"./index-DlECNy7h.js";function y({runId:u,onDone:c}){const[a,l]=i.useState(0),[r,g]=i.useState(null),[o,x]=i.useState(null),[n,m]=i.useState(null),[d,p]=i.useState(!1),b=async()=>{p(!0);try{await f.patch(`/runs/${u}`,{perceived_effort:r,pain_level:o,post_energy:n}).catch(()=>{})}finally{p(!1),c()}};return e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"flex-end",justifyContent:"center",zIndex:50,padding:16},children:e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:"24px 24px 16px 16px",padding:24,width:"100%",maxWidth:480},children:[e.jsx("div",{style:{display:"flex",gap:6,justifyContent:"center",marginBottom:24},children:[0,1,2].map(t=>e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:t<=a?"var(--accent)":"var(--border-subtle)",transition:"background 0.2s"}},t))}),a===0&&e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:800,fontSize:18,color:"var(--text-primary)",marginBottom:6},children:"How hard was that?"}),e.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",marginBottom:20},children:"Rate your effort — 1 easy, 10 all out."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8,marginBottom:20},children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsx("button",{onClick:()=>g(t),style:{padding:"12px 4px",borderRadius:12,border:`2px solid ${r===t?"var(--accent)":"var(--border-subtle)"}`,background:r===t?"var(--accent-dim)":"var(--bg-input)",color:r===t?"var(--accent)":"var(--text-muted)",fontWeight:700,fontSize:16,cursor:"pointer"},children:t},t))}),e.jsx("button",{onClick:()=>r&&l(1),disabled:!r,style:{width:"100%",padding:16,background:r?"var(--accent)":"var(--bg-input)",color:"#000",fontWeight:900,borderRadius:14,border:"none",cursor:r?"pointer":"default",fontSize:15,opacity:r?1:.5},children:"Next"})]}),a===1&&e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:800,fontSize:18,color:"var(--text-primary)",marginBottom:6},children:"Any pain or discomfort?"}),e.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",marginBottom:20},children:"Be honest — FORGE adjusts your next session."}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[["none","None — felt great"],["mild","Mild — manageable"],["moderate","Moderate — noticeable"],["severe","Severe — need rest"]].map(([t,s])=>e.jsx("button",{onClick:()=>x(t),style:{padding:"14px 16px",borderRadius:14,border:`2px solid ${o===t?"var(--accent)":"var(--border-subtle)"}`,background:o===t?"var(--accent-dim)":"var(--bg-input)",color:o===t?"var(--accent)":"var(--text-primary)",fontWeight:600,fontSize:14,cursor:"pointer",textAlign:"left"},children:s},t))}),e.jsx("button",{onClick:()=>o&&l(2),disabled:!o,style:{width:"100%",padding:16,background:o?"var(--accent)":"var(--bg-input)",color:"#000",fontWeight:900,borderRadius:14,border:"none",cursor:o?"pointer":"default",fontSize:15,opacity:o?1:.5},children:"Next"})]}),a===2&&e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:800,fontSize:18,color:"var(--text-primary)",marginBottom:6},children:"Energy level after?"}),e.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",marginBottom:20},children:"This helps FORGE plan your recovery time."}),e.jsx("div",{style:{display:"flex",gap:10,marginBottom:20},children:[["low","Drained"],["medium","Okay"],["high","Energized"]].map(([t,s])=>e.jsx("button",{onClick:()=>m(t),style:{flex:1,padding:"16px 8px",borderRadius:14,border:`2px solid ${n===t?"var(--accent)":"var(--border-subtle)"}`,background:n===t?"var(--accent-dim)":"var(--bg-input)",color:n===t?"var(--accent)":"var(--text-muted)",fontWeight:700,fontSize:13,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:s},t))}),e.jsx("button",{onClick:()=>n&&b(),disabled:!n||d,style:{width:"100%",padding:16,background:n?"var(--accent)":"var(--bg-input)",color:"#000",fontWeight:900,borderRadius:14,border:"none",cursor:n?"pointer":"default",fontSize:15,opacity:n&&!d?1:.5},children:d?"Saving...":"Done"})]}),e.jsx("button",{onClick:c,style:{width:"100%",marginTop:12,background:"none",border:"none",color:"var(--text-muted)",fontSize:13,cursor:"pointer"},children:"Skip"})]})})}export{y as P};
