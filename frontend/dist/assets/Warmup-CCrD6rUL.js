import{b as W,r as d,j as e,u as A,a as j}from"./index-DPvCFa56.js";import{L as _}from"./LoadingRunner-B4Gs0_Nn.js";import{C as H,T as L}from"./trending-up-BVCDZYuX.js";import{Z as P}from"./zap-Dpp62DRx.js";import{H as Y}from"./heart-C6YbR_HN.js";const u=[{name:"Leg Swings",detail:"10 each side"},{name:"High Knees",detail:"30 seconds"},{name:"Ankle Circles",detail:"10 each direction"},{name:"Hip Circles",detail:"10 each direction"},{name:"Arm Swings",detail:"20 reps"}];function U(t,n){var a;let i=60;n&&(i+=10),Number((t==null?void 0:t.streak)||0)>=3&&(i+=10);const s=Number(((a=t==null?void 0:t.week)==null?void 0:a.miles)||0);return s<10&&(i+=10),s>30&&(i-=10),Math.max(30,Math.min(100,i))}function $(t){return t<50?"#ef4444":t<75?"#EAB308":"#22c55e"}function D(t,n){return t<50?n("run.takeItEasy"):t<75?n("run.goodToGo"):n("run.youAreReady")}function F(t){var r;const n=Number(((r=t==null?void 0:t.week)==null?void 0:r.miles)||0),i=Number((t==null?void 0:t.streak)||0);return n>30?"You've been grinding - keep today easy.":n<10?"Your legs are fresh - push the pace today.":i>=5?"Your consistency is strong - let's build on it.":"You're ready. Trust your training."}function G({stepIndex:t,onNext:n,onSkip:i}){const{t:r}=A(),s=u[t],a=(t+1)/u.length*100;return e.jsxs("div",{className:"flex flex-col min-h-screen justify-between relative overflow-hidden",style:{background:"linear-gradient(135deg, var(--bg-base) 0%, rgba(0,0,0,0.3) 100%)",paddingBottom:80},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:"3px",background:"rgba(255,255,255,0.1)",zIndex:40},children:e.jsx("div",{style:{height:"100%",width:`${a}%`,background:"#EAB308",transition:"width 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 0 16px rgba(234, 179, 8, 0.6)"}})}),e.jsxs("div",{style:{paddingTop:16},children:[e.jsx("p",{style:{textAlign:"center",fontSize:13,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:1.2,margin:0,marginTop:16},children:"Warm-Up"}),e.jsxs("p",{style:{textAlign:"center",fontSize:13,color:"var(--text-muted)",margin:"4px 0 0"},children:[r("run.step")," ",t+1," ",r("run.of")," ",u.length]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 px-6",children:[e.jsx("div",{style:{width:120,height:120,borderRadius:"50%",border:"3px solid #EAB308",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:40,animation:"scale-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e.jsx("span",{style:{fontSize:56,fontWeight:900,color:"#EAB308"},children:t+1})}),e.jsx("h2",{style:{fontSize:48,fontWeight:900,textAlign:"center",color:"var(--text-primary)",margin:"0 0 16px",lineHeight:1.1,textTransform:"uppercase",letterSpacing:-1,animation:"fade-in 0.6s ease"},children:s.name}),e.jsx("p",{style:{fontSize:20,fontWeight:600,color:"#EAB308",margin:"0 0 32px",textAlign:"center"},children:s.detail}),e.jsx("p",{style:{fontSize:14,color:"var(--text-muted)",textAlign:"center",margin:0,fontStyle:"italic"},children:"Complete this movement, then tap Next"})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 px-4 py-6",style:{background:"linear-gradient(to top, rgba(0,0,0,0.5), transparent)"},children:e.jsxs("div",{className:"max-w-[480px] mx-auto",children:[e.jsx("button",{onClick:n,style:{width:"100%",padding:"20px 0",fontSize:16,fontWeight:800,textTransform:"uppercase",letterSpacing:1.2,borderRadius:24,border:"none",background:"#EAB308",color:"#000",cursor:"pointer",boxShadow:"0 8px 24px rgba(234, 179, 8, 0.3)",transition:"all 0.2s ease",marginBottom:12},onMouseEnter:o=>o.target.style.boxShadow="0 12px 32px rgba(234, 179, 8, 0.5)",onMouseLeave:o=>o.target.style.boxShadow="0 8px 24px rgba(234, 179, 8, 0.3)",children:t===u.length-1?r("run.finishWarmup"):r("run.next")}),e.jsx("button",{onClick:i,style:{width:"100%",textAlign:"center",background:"none",border:"none",color:"var(--text-muted)",fontSize:12,cursor:"pointer",padding:"8px 0",transition:"color 0.2s"},onMouseEnter:o=>o.target.style.color="var(--text-primary)",onMouseLeave:o=>o.target.style.color="var(--text-muted)",children:r("run.skipWarmup")})]})}),e.jsx("style",{children:`
        @keyframes scale-in {
          from { transform: scale(0.8); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
      `})]})}function Z({onStartRun:t}){var S,k,w,z;const{t:n}=A(),i=W(),[r,s]=d.useState(null),[a,o]=d.useState(null),[g,h]=d.useState(null),[B,C]=d.useState(!0),[T,E]=d.useState(!1);if(d.useEffect(()=>{(async()=>{var m;try{const[b,v,x]=await Promise.all([j.get("/auth/me/stats").catch(()=>({data:null})),j.get("/checkin/today").catch(()=>({data:null})),j.get("/plans/current").catch(()=>({data:null}))]);s(b==null?void 0:b.data);const l=v==null?void 0:v.data;o(l),E(!!((l==null?void 0:l.completed)??(l==null?void 0:l.id)??l)),h(((m=x==null?void 0:x.data)==null?void 0:m.plan)||(x==null?void 0:x.data))}finally{C(!1)}})()},[]),B)return e.jsx(_,{message:"Assessing readiness"});if(!T)return e.jsx("div",{style:{minHeight:"100vh",padding:"24px 16px",background:"var(--bg-base)"},children:e.jsxs("div",{className:"max-w-[480px] mx-auto rounded-2xl p-5",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:[e.jsx("h2",{style:{color:"var(--text-primary)",fontSize:24,fontWeight:900,margin:"0 0 10px"},children:"Morning Check-In Required"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,margin:"0 0 16px"},children:"Complete your morning check-in before starting a run."}),e.jsx("button",{onClick:()=>i("/checkin"),style:{width:"100%",background:"#EAB308",border:"none",borderRadius:12,padding:"12px 0",fontWeight:800,cursor:"pointer"},children:"Go to Check-In"})]})});const f=U(r,a),y=$(f),R=D(f,n),M=F(r),N=Number(((S=r==null?void 0:r.week)==null?void 0:S.miles)||0),I=Number((r==null?void 0:r.streak)||0);let p=null;if((z=(w=(k=g==null?void 0:g.plan_json)==null?void 0:k.weeks)==null?void 0:w[0])!=null&&z.days){const c=new Date,m=c.getDay()===0?6:c.getDay()-1;p=g.plan_json.weeks[0].days[m]}return e.jsx("div",{style:{background:"linear-gradient(135deg, var(--bg-base) 0%, rgba(0,0,0,0.3) 100%)",minHeight:"100vh",paddingBottom:100},children:e.jsxs("div",{className:"px-4 pt-6 max-w-[480px] mx-auto space-y-4",children:[e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:24,border:"1px solid var(--border-subtle)"},children:[e.jsx("p",{style:{fontSize:13,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",margin:"0 0 12px",letterSpacing:1},children:n("run.readiness")}),e.jsx("p",{style:{fontSize:32,fontWeight:900,color:y,margin:"0 0 16px"},children:R}),e.jsx("div",{style:{height:8,background:"var(--bg-input)",borderRadius:4,overflow:"hidden",marginBottom:12},children:e.jsx("div",{style:{height:"100%",width:`${f}%`,background:y,borderRadius:4,transition:"width 0.8s ease",boxShadow:`0 0 12px ${y}44`}})}),e.jsx("p",{style:{fontSize:14,color:"var(--text-muted)",margin:0,fontStyle:"italic"},children:M})]}),p&&e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:16,border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx(H,{size:18,style:{color:"#EAB308"}}),e.jsx("p",{style:{fontSize:13,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",margin:0,letterSpacing:.8},children:n("run.todayPlan")})]}),e.jsx("p",{style:{fontSize:18,fontWeight:800,color:"var(--text-primary)",margin:"0 0 4px",textTransform:"capitalize"},children:String(p.workout_type||p.type||"Rest Day").replace(/_/g," ")}),p.distance&&e.jsxs("p",{style:{fontSize:13,color:"var(--text-muted)",margin:0},children:["Target: ",p.distance," miles"]})]}),e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:16,border:"1px solid var(--border-subtle)",display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(L,{size:16,style:{color:"#EAB308"}}),e.jsx("p",{style:{fontSize:12,color:"var(--text-muted)",margin:0,fontWeight:600},children:"Week Miles"})]}),e.jsx("p",{style:{fontSize:24,fontWeight:900,color:"var(--text-primary)",margin:0},children:N.toFixed(1)})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(P,{size:16,style:{color:"#EAB308"}}),e.jsx("p",{style:{fontSize:12,color:"var(--text-muted)",margin:0,fontWeight:600},children:"Streak"})]}),e.jsxs("p",{style:{fontSize:24,fontWeight:900,color:"var(--text-primary)",margin:0},children:[I," days"]})]})]}),a&&e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:16,border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx(Y,{size:18,style:{color:"#EAB308"}}),e.jsx("p",{style:{fontSize:13,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",margin:0,letterSpacing:.8},children:n("run.feeling")})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[a.feeling&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,color:"var(--text-muted)",margin:"0 0 4px"},children:"Feeling"}),e.jsxs("p",{style:{fontSize:14,fontWeight:700,color:"var(--accent)",margin:0},children:[a.feeling,"/5"]})]}),a.time_available&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,color:"var(--text-muted)",margin:"0 0 4px"},children:"Time Available"}),e.jsxs("p",{style:{fontSize:14,fontWeight:700,color:"var(--accent)",margin:0},children:[a.time_available," min"]})]})]})]}),e.jsx("button",{onClick:t,style:{width:"100%",padding:"20px 0",fontSize:16,fontWeight:800,textTransform:"uppercase",letterSpacing:1.2,borderRadius:24,border:"none",background:"#EAB308",color:"#000",cursor:"pointer",boxShadow:"0 8px 24px rgba(234, 179, 8, 0.3)",transition:"all 0.2s ease",marginTop:24},onMouseEnter:c=>c.target.style.boxShadow="0 12px 32px rgba(234, 179, 8, 0.5)",onMouseLeave:c=>c.target.style.boxShadow="0 8px 24px rgba(234, 179, 8, 0.3)",children:n("run.startRun")})]})})}function V(){const t=W(),[n,i]=d.useState("warmup-steps"),[r,s]=d.useState(0),a=()=>{r===u.length-1?i("warmup-done"):s(h=>h+1)},o=()=>{i("warmup-done")},g=()=>{t("/log-run")};return e.jsxs("div",{children:[n==="warmup-steps"&&e.jsx(G,{stepIndex:r,onNext:a,onSkip:o}),n==="warmup-done"&&e.jsx(Z,{onStartRun:g})]})}export{V as default};
