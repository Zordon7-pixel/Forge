import{r as n,j as a,a as y}from"./index-BY6vNrGT.js";const S=[{key:"mentor",label:"Mentor"},{key:"hype_coach",label:"Hype Coach"},{key:"drill_sergeant",label:"Drill Sergeant"},{key:"training_partner",label:"Training Partner"}];function F(){const[t,h]=n.useState(1),[d,i]=n.useState(!1),[v,c]=n.useState(""),[r,p]=n.useState({age:"",weightLbs:"",heightFt:5,heightIn:8,weeklyMiles:10,fitnessLevel:"beginner",primaryGoal:"general_fitness",injuryStatus:"none",injuryDetail:"",coachPersonality:"mentor"}),[u,g]=n.useState("adaptive"),[m,f]=n.useState("works_fulltime"),[b,j]=n.useState("evening"),[x,k]=n.useState("adjust_week"),N=n.useMemo(()=>`${t/8*100}%`,[t]),w=()=>h(e=>Math.min(8,e+1)),C=()=>h(e=>Math.max(1,e-1)),o=(e,l)=>p(s=>({...s,[e]:l})),_=async()=>{var e,l;if(c(""),i(!0),!r.age||r.age<10||r.age>100)return c("Please enter a valid age."),i(!1);if(!r.weightLbs||r.weightLbs<50||r.weightLbs>500)return c("Please enter a valid weight."),i(!1);try{const{data:s}=await y.put("/auth/me/profile",{age:Number(r.age),weight_lbs:Number(r.weightLbs),height_ft:Number(r.heightFt),height_in:Number(r.heightIn),weekly_miles:Number(r.weeklyMiles),fitness_level:r.fitnessLevel,primary_goal:r.primaryGoal,injury_status:r.injuryStatus,injury_detail:r.injuryDetail,coach_personality:r.coachPersonality,schedule_type:u,lifestyle:m,preferred_workout_time:b,missed_workout_pref:x});s!=null&&s.token&&localStorage.setItem("forge_token",s.token),await y.post("/plans/generate"),window.location.href="/"}catch(s){c(((l=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:l.error)||"Could not finish onboarding. Please try again."),i(!1)}};return a.jsxs("div",{className:"min-h-screen px-4 py-6",style:{background:"var(--bg-base)",color:"var(--text-primary)"},children:[a.jsxs("div",{className:"mx-auto w-full max-w-[480px]",children:[a.jsx("div",{className:"mb-6 h-2 w-full overflow-hidden rounded-full",style:{background:"var(--bg-card)"},children:a.jsx("div",{className:"h-full transition-all",style:{width:N,background:"var(--accent)"}})}),a.jsxs("div",{className:"rounded-2xl border p-5",style:{borderColor:"var(--border-subtle)",background:"var(--bg-card)"},children:[a.jsxs("p",{className:"mb-1 text-xs uppercase tracking-widest",style:{color:"var(--text-muted)"},children:["Step ",t," of 8"]}),t===1&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"Your baseline"}),a.jsx("input",{type:"number",min:"1",placeholder:"Age",className:"w-full rounded-xl border px-4 py-3",style:{borderColor:"var(--border-subtle)",background:"var(--bg-input)"},value:r.age,onChange:e=>o("age",e.target.value)}),a.jsx("input",{type:"number",min:"1",placeholder:"Weight (lbs)",className:"w-full rounded-xl border px-4 py-3",style:{borderColor:"var(--border-subtle)",background:"var(--bg-input)"},value:r.weightLbs,onChange:e=>o("weightLbs",e.target.value)}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("select",{className:"rounded-xl border px-4 py-3",style:{borderColor:"var(--border-subtle)",background:"var(--bg-input)"},value:r.heightFt,onChange:e=>o("heightFt",e.target.value),children:[4,5,6,7].map(e=>a.jsxs("option",{value:e,children:[e," ft"]},e))}),a.jsx("select",{className:"rounded-xl border px-4 py-3",style:{borderColor:"var(--border-subtle)",background:"var(--bg-input)"},value:r.heightIn,onChange:e=>o("heightIn",e.target.value),children:Array.from({length:12}).map((e,l)=>a.jsxs("option",{value:l,children:[l," in"]},l))})]})]}),t===2&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Training profile"}),a.jsxs("div",{children:[a.jsxs("label",{className:"mb-2 block text-sm",style:{color:"var(--text-muted)"},children:["Weekly miles: ",r.weeklyMiles]}),a.jsx("input",{type:"range",min:"0",max:"50",value:r.weeklyMiles,onChange:e=>o("weeklyMiles",e.target.value),className:"w-full accent-yellow-500"})]}),a.jsx("div",{className:"space-y-2",children:["beginner","intermediate","advanced"].map(e=>a.jsxs("label",{className:"flex items-center gap-2 capitalize",style:{color:"var(--text-primary)"},children:[a.jsx("input",{type:"radio",name:"fitnessLevel",value:e,checked:r.fitnessLevel===e,onChange:l=>o("fitnessLevel",l.target.value)}),e]},e))})]}),t===3&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Primary goal"}),[["get_faster","Get Faster"],["run_longer","Run Longer"],["lose_fat","Lose Fat"],["general_fitness","General Fitness"]].map(([e,l])=>a.jsxs("label",{className:"flex items-center gap-2",style:{color:"var(--text-primary)"},children:[a.jsx("input",{type:"radio",name:"primaryGoal",value:e,checked:r.primaryGoal===e,onChange:s=>o("primaryGoal",s.target.value)}),l]},e))]}),t===4&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Injury status"}),["none","recovering","chronic"].map(e=>a.jsxs("label",{className:"flex items-center gap-2 capitalize",style:{color:"var(--text-primary)"},children:[a.jsx("input",{type:"radio",name:"injuryStatus",value:e,checked:r.injuryStatus===e,onChange:l=>o("injuryStatus",l.target.value)}),e]},e)),r.injuryStatus!=="none"&&a.jsx("textarea",{rows:4,placeholder:"Tell us more about your injury",className:"w-full rounded-xl border px-4 py-3",style:{borderColor:"var(--border-subtle)",background:"var(--bg-input)"},value:r.injuryDetail,onChange:e=>o("injuryDetail",e.target.value)})]}),t===5&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Coach personality"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:S.map(e=>a.jsx("button",{type:"button",onClick:()=>o("coachPersonality",e.key),className:"rounded-xl border p-4 text-left text-sm transition",style:r.coachPersonality===e.key?{borderColor:"var(--accent)",background:"var(--accent-dim)",color:"var(--text-primary)"}:{borderColor:"var(--border-subtle)",background:"var(--bg-input)",color:"var(--text-muted)"},children:e.label},e.key))})]}),t===6&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-black",style:{color:"var(--text-primary)"},children:"How do you want to train?"}),a.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"This shapes how your plan adapts to real life."}),[{value:"flexible",label:"Flexible",desc:"Adjust my plan around my life. I run when I can."},{value:"adaptive",label:"Adaptive",desc:"Give me a plan, but rebuild it when life gets in the way."},{value:"structured",label:"Structured",desc:"Fixed weekly schedule. I commit and I show up."}].map(e=>a.jsxs("button",{onClick:()=>g(e.value),className:"w-full p-4 rounded-2xl text-left border transition-all",style:{background:u===e.value?"var(--accent-dim)":"var(--bg-input)",borderColor:u===e.value?"var(--accent)":"var(--border-subtle)"},children:[a.jsx("p",{className:"font-bold",style:{color:"var(--text-primary)"},children:e.label}),a.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-muted)"},children:e.desc})]},e.value))]}),t===7&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-black",style:{color:"var(--text-primary)"},children:"What's your situation?"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"works_fulltime",label:"9-5 Job"},{value:"works_shifts",label:"Shift Work"},{value:"student",label:"Student"},{value:"works_from_home",label:"Work From Home"},{value:"self_employed",label:"Self-Employed"},{value:"free_schedule",label:"Free Schedule"}].map(e=>a.jsx("button",{onClick:()=>f(e.value),className:"p-3 rounded-xl text-center font-semibold text-sm border",style:{background:m===e.value?"var(--accent-dim)":"var(--bg-input)",borderColor:m===e.value?"var(--accent)":"var(--border-subtle)",color:"var(--text-primary)"},children:e.label},e.value))}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:"var(--text-primary)"},children:"When do you prefer to train?"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"morning",label:"Morning",sub:"Before work"},{value:"midday",label:"Midday",sub:"Lunch break"},{value:"evening",label:"Evening",sub:"After work"},{value:"varies",label:"It varies",sub:"No preference"}].map(e=>a.jsxs("button",{onClick:()=>j(e.value),className:"p-3 rounded-xl text-left border",style:{background:b===e.value?"var(--accent-dim)":"var(--bg-input)",borderColor:b===e.value?"var(--accent)":"var(--border-subtle)"},children:[a.jsx("p",{className:"font-semibold text-sm",style:{color:"var(--text-primary)"},children:e.label}),a.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:e.sub})]},e.value))})]})]}),t===8&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-black",style:{color:"var(--text-primary)"},children:"If you miss a workout..."}),a.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Life happens. What should I do?"}),[{value:"skip",label:"Skip it, move on",desc:"Don't try to make it up. Keep the week clean."},{value:"move_next",label:"Move to tomorrow",desc:"Push it 24 hours and carry on."},{value:"adjust_week",label:"Rebuild my week",desc:"Adjust everything to fit the missed session in."}].map(e=>a.jsxs("button",{onClick:()=>k(e.value),className:"w-full p-4 rounded-2xl text-left border",style:{background:x===e.value?"var(--accent-dim)":"var(--bg-input)",borderColor:x===e.value?"var(--accent)":"var(--border-subtle)"},children:[a.jsx("p",{className:"font-bold",style:{color:"var(--text-primary)"},children:e.label}),a.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-muted)"},children:e.desc})]},e.value))]}),v&&a.jsx("p",{className:"mt-4 text-sm",style:{color:"var(--accent)"},children:v}),a.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[a.jsx("button",{type:"button",onClick:C,disabled:t===1||d,className:"rounded-xl border px-4 py-2 disabled:opacity-40",style:{borderColor:"var(--border-subtle)",color:"var(--text-muted)"},children:"Back"}),t<8?a.jsx("button",{type:"button",onClick:w,className:"rounded-xl px-5 py-2 font-semibold",style:{background:"var(--accent)",color:"black"},children:"Next"}):a.jsx("button",{type:"button",onClick:_,disabled:d,className:"rounded-xl px-5 py-2 font-semibold disabled:opacity-70",style:{background:"var(--accent)",color:"black"},children:"Finish"})]})]})]}),d&&a.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center",style:{background:"rgba(0,0,0,0.85)",color:"var(--text-primary)"},children:[a.jsx("div",{className:"mb-4 h-10 w-10 animate-spin rounded-full border-4 border-t-transparent",style:{borderColor:"var(--accent)",borderTopColor:"transparent"}}),a.jsx("p",{className:"text-lg font-semibold",children:"Building your plan..."})]})]})}export{F as default};
