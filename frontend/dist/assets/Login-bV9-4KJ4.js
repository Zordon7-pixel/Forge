import{u as F,r as o,j as e,L as C,a as b}from"./index-DlECNy7h.js";function L(){const{t:s}=F(),[l,f]=o.useState(""),[n,v]=o.useState(""),[c,i]=o.useState(""),[d,u]=o.useState(!1),[j,m]=o.useState(!1),[x,w]=o.useState(""),[p,a]=o.useState(""),[g,y]=o.useState(!1),N=async t=>{t.preventDefault(),i(""),u(!0);try{const k=await b.post("/auth/login",{email:l,password:n});localStorage.setItem("forge_token",k.data.token),window.location.href="/"}catch{i("Wrong email or password.")}finally{u(!1)}},S=async t=>{t.preventDefault(),a(""),y(!0);try{await b.post("/auth/forgot-password",{email:x}),a("If that email exists, a reset link has been logged to the server console.")}catch{a("Something went wrong. Please try again.")}finally{y(!1)}},r={borderColor:"var(--border-subtle)",background:"var(--bg-input)",color:"var(--text-primary)"},h={background:"var(--accent)",color:"black"};return e.jsx("div",{className:"flex min-h-screen items-center justify-center px-4",style:{background:"var(--bg-base)",color:"var(--text-primary)"},children:e.jsx("div",{className:"w-full max-w-[420px] rounded-2xl border p-6 shadow-xl",style:{borderColor:"var(--border-subtle)",background:"var(--bg-card)"},children:j?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mb-1 text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Reset Password"}),e.jsx("p",{className:"mb-6 text-sm",style:{color:"var(--text-muted)"},children:"Enter your email and we will log a reset link to the server console."}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsx("input",{type:"email",required:!0,placeholder:"Your email address",className:"w-full rounded-xl border px-4 py-3 outline-none placeholder:text-gray-500 focus:ring-2",style:r,value:x,onChange:t=>w(t.target.value)}),e.jsx("button",{type:"submit",disabled:g,className:"w-full rounded-xl py-3 font-semibold transition hover:opacity-90 disabled:opacity-70",style:h,children:g?"Sending...":"Send Reset Link"})]}),p&&e.jsx("p",{className:"mt-3 text-sm",style:{color:"var(--accent)"},children:p}),e.jsx("button",{type:"button",onClick:()=>m(!1),className:"mt-4 w-full text-sm hover:underline",style:{color:"var(--text-muted)"},children:"Back to sign in"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mb-1 text-2xl font-bold",style:{color:"var(--text-primary)"},children:s("auth.login")}),e.jsxs("p",{className:"mb-6 text-sm",style:{color:"var(--text-muted)"},children:[s("auth.login")," to continue your training."]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsx("input",{type:"email",required:!0,placeholder:s("auth.email"),className:"w-full rounded-xl border px-4 py-3 outline-none placeholder:text-gray-500 focus:ring-2",style:r,value:l,onChange:t=>f(t.target.value)}),e.jsx("input",{type:"password",required:!0,placeholder:s("auth.password"),className:"w-full rounded-xl border px-4 py-3 outline-none placeholder:text-gray-500 focus:ring-2",style:r,value:n,onChange:t=>v(t.target.value)}),e.jsx("button",{type:"submit",disabled:d,className:"w-full rounded-xl py-3 font-semibold transition hover:opacity-90 disabled:opacity-70",style:h,children:s(d?"common.loading":"auth.login")})]}),c&&e.jsx("p",{className:"mt-3 text-sm",style:{color:"var(--accent)"},children:c}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:[s("auth.noAccount")," ",e.jsx(C,{to:"/register",className:"font-semibold hover:underline",style:{color:"var(--accent)"},children:s("auth.register")})]}),e.jsx("button",{type:"button",onClick:()=>{m(!0),a("")},className:"text-sm hover:underline",style:{color:"var(--text-muted)"},children:"Forgot password?"})]})]})})})}export{L as default};
