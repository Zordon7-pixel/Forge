import{b as A,r as a,a as x,j as t}from"./index-DPvCFa56.js";const I=[{value:1,label:"Exhausted",img:"/checkin/exhausted.png"},{value:2,label:"Tired",img:"/checkin/tired.png"},{value:3,label:"Okay",img:"/checkin/okay.png"},{value:4,label:"Good",img:"/checkin/good.png"},{value:5,label:"Great",img:"/checkin/great.png"}],H=[{value:20,label:"20 min"},{value:45,label:"45 min"},{value:60,label:"1 hour"},{value:90,label:"1.5 hrs"},{value:120,label:"2+ hrs"}],T=[{value:"long_shift",label:"Long shift"},{value:"sore",label:"Sore"},{value:"traveling",label:"Traveling"},{value:"sick",label:"Not well"},{value:"stressed",label:"Stressed"},{value:"all_good",label:"All good"}];function C({onComplete:l}){const c=A(),[i,y]=a.useState(null),[n,f]=a.useState(null),[u,h]=a.useState([]),[g,b]=a.useState(!1),[v,j]=a.useState(null),[r,S]=a.useState(null),[k,w]=a.useState(!1),[z,W]=a.useState(!1),[s,m]=a.useState("");a.useEffect(()=>{x.get("/checkin/today").then(e=>{e.data&&W(!0)}).catch(()=>{})},[]);const B=e=>{if(e==="all_good"){h(["all_good"]);return}h(o=>{const d=o.filter(p=>p!=="all_good");return o.includes(e)?d.filter(p=>p!==e):[...d,e]})},R=async()=>{var e;if(!(!i||!n)){b(!0);try{const o=await x.post("/checkin",{feeling:i,time_available:n,life_flags:u,sleep_hours:s===""?null:Number(s)});try{const d=await x.get("/plans/today");(e=d.data)!=null&&e.today&&S(d.data.today)}catch{}o.data.adjustment?j(o.data.adjustment):(l==null||l(),c("/"))}finally{b(!1)}}};if(z)return t.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-base)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24,gap:16,maxWidth:480,margin:"0 auto",width:"100%",boxSizing:"border-box"},children:[t.jsx("p",{style:{fontSize:18,fontWeight:700,color:"var(--text-primary)",textAlign:"center"},children:"You've already checked in today"}),t.jsx("button",{onClick:()=>c("/"),style:{background:"var(--accent)",color:"#000",fontWeight:700,borderRadius:14,padding:"16px 32px",border:"none",cursor:"pointer"},children:"Go to Dashboard"})]});if(k){const e=(r==null?void 0:r.type)==="strength"?"/log-lift":"/log-run";return t.jsx("div",{style:{minHeight:"100vh",background:"var(--bg-base)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24,gap:20,textAlign:"center",maxWidth:480,margin:"0 auto",width:"100%",boxSizing:"border-box"},children:t.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:20,padding:32,width:"100%"},children:[t.jsx("p",{style:{fontSize:22,fontWeight:900,color:"var(--text-primary)",marginBottom:8},children:"Let's stretch first"}),t.jsx("p",{style:{fontSize:14,color:"var(--text-muted)",lineHeight:1.6,marginBottom:28},children:"A quick pre-run stretch reduces injury risk and gets your muscles ready. Takes about 5 minutes."}),t.jsx("button",{onClick:()=>c("/stretches/session?type=pre"),style:{width:"100%",background:"var(--accent)",color:"#000",fontWeight:900,borderRadius:14,padding:"18px",border:"none",cursor:"pointer",fontSize:16,marginBottom:12},children:"Start Stretching"}),t.jsx("button",{onClick:()=>{l==null||l(),c(e)},style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)",fontSize:14,padding:"8px 0"},children:"Skip, go straight to workout"})]})})}return v?t.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-base)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24,gap:20,textAlign:"center",maxWidth:480,margin:"0 auto",width:"100%",boxSizing:"border-box"},children:[t.jsx("p",{style:{fontSize:16,lineHeight:1.6,color:"var(--text-primary)",maxWidth:340},children:v}),r&&t.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,width:"100%",textAlign:"left"},children:[t.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:10},children:"Today's Workout"}),t.jsx("p",{style:{fontSize:18,fontWeight:800,color:"var(--text-primary)",marginBottom:4,textTransform:"capitalize"},children:r.type||"Run"}),r.distance&&t.jsxs("p",{style:{fontSize:14,color:"var(--text-muted)"},children:[r.distance," miles"]}),r.pace&&t.jsx("p",{style:{fontSize:14,color:"var(--text-muted)"},children:r.pace}),r.notes&&t.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",marginTop:8,lineHeight:1.5},children:r.notes})]}),t.jsx("button",{onClick:()=>w(!0),style:{background:"var(--accent)",color:"#000",fontWeight:900,borderRadius:14,padding:"18px 48px",border:"none",cursor:"pointer",fontSize:16},children:"Let's go"})]}):t.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-base)",padding:"24px 20px",paddingBottom:100,maxWidth:480,margin:"0 auto",boxSizing:"border-box",width:"100%"},children:[t.jsx("h1",{style:{fontWeight:900,fontSize:26,color:"var(--text-primary)",marginBottom:4},children:"Morning Check-In"}),t.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,marginBottom:28},children:"3 taps â€” I'll adjust your plan around your day."}),t.jsxs("div",{style:{marginBottom:24},children:[t.jsx("p",{style:{fontWeight:700,color:"var(--text-primary)",marginBottom:12},children:"How are you feeling?"}),t.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:6},children:I.map(e=>t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,flex:1},children:[t.jsx("button",{onClick:()=>y(e.value),style:{width:62,height:62,borderRadius:"50%",border:i===e.value?"2.5px solid var(--accent)":"2.5px solid transparent",background:i===e.value?"var(--accent-dim)":"var(--bg-input)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,boxShadow:i===e.value?"0 0 12px rgba(234,179,8,0.35)":"none",transition:"all 0.2s",flexShrink:0},children:t.jsx("img",{src:e.img,alt:e.label,style:{width:46,height:46,objectFit:"cover",borderRadius:"50%",filter:i===e.value?"brightness(1.1)":"brightness(0.7)",transition:"filter 0.2s"}})}),t.jsx("span",{style:{fontSize:10,fontWeight:700,textAlign:"center",color:i===e.value?"var(--accent)":"var(--text-muted)"},children:e.label})]},e.value))})]}),t.jsxs("div",{style:{marginBottom:24},children:[t.jsx("p",{style:{fontWeight:700,color:"var(--text-primary)",marginBottom:12},children:"How much time do you have to workout?"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:H.map(e=>t.jsx("button",{onClick:()=>f(e.value),style:{padding:"10px 16px",borderRadius:12,border:`2px solid ${n===e.value?"var(--accent)":"var(--border-subtle)"}`,background:n===e.value?"var(--accent-dim)":"var(--bg-card)",color:n===e.value?"var(--accent)":"var(--text-muted)",fontWeight:700,fontSize:14,cursor:"pointer"},children:e.label},e.value))})]}),t.jsxs("div",{style:{marginBottom:32},children:[t.jsx("p",{style:{fontWeight:700,color:"var(--text-primary)",marginBottom:12},children:"Anything going on?"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:T.map(e=>t.jsx("button",{onClick:()=>B(e.value),style:{padding:"10px 16px",borderRadius:12,border:`2px solid ${u.includes(e.value)?"var(--accent)":"var(--border-subtle)"}`,background:u.includes(e.value)?"var(--accent-dim)":"var(--bg-card)",color:u.includes(e.value)?"var(--accent)":"var(--text-muted)",fontWeight:700,fontSize:14,cursor:"pointer"},children:e.label},e.value))})]}),t.jsxs("div",{style:{marginBottom:24},children:[t.jsx("p",{style:{fontWeight:700,color:"var(--text-primary)",marginBottom:12},children:"Hours of sleep last night?"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:10},children:["4","5","6","7","8","9"].map((e,o)=>t.jsx("button",{onClick:()=>m(e),style:{padding:"10px 14px",borderRadius:12,border:`2px solid ${s===e?"var(--accent)":"var(--border-subtle)"}`,background:s===e?"var(--accent-dim)":"var(--bg-card)",color:s===e?"var(--accent)":"var(--text-muted)",fontWeight:700,fontSize:14,cursor:"pointer"},children:o<5?`${e}h`:"9h+"},e))}),t.jsx("input",{type:"number",min:"0",max:"14",step:"0.5",placeholder:"Custom sleep hours",value:s,onChange:e=>m(e.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:10,background:"var(--bg-input)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)",fontSize:14,boxSizing:"border-box"}})]}),t.jsx("button",{onClick:R,disabled:!i||!n||g,style:{width:"100%",background:i&&n?"var(--accent)":"var(--bg-input)",color:"#000",fontWeight:900,fontSize:17,borderRadius:16,padding:"18px",border:"none",cursor:"pointer",opacity:g?.6:1},children:g?"Adjusting your plan...":"Done"})]})}export{C as default};
