import{b as A,r as i,a as h,j as e}from"./index-B0TFXbO8.js";const B=[{value:1,label:"Exhausted",img:"/checkin/exhausted.png"},{value:2,label:"Tired",img:"/checkin/tired.png"},{value:3,label:"Okay",img:"/checkin/okay.png"},{value:4,label:"Good",img:"/checkin/good.png"},{value:5,label:"Great",img:"/checkin/great.png"}],R=[{value:20,label:"20 min"},{value:45,label:"45 min"},{value:60,label:"1 hour"},{value:90,label:"1.5 hrs"},{value:120,label:"2+ hrs"}],I=[{value:"long_shift",label:"Long shift"},{value:"sore",label:"Sore"},{value:"traveling",label:"Traveling"},{value:"sick",label:"Not well"},{value:"stressed",label:"Stressed"},{value:"all_good",label:"All good"}];function _({onComplete:o}){const d=A(),[r,v]=i.useState(null),[n,m]=i.useState(null),[c,x]=i.useState([]),[u,p]=i.useState(!1),[b,y]=i.useState(null),[a,f]=i.useState(null),[j,S]=i.useState(!1),[k,w]=i.useState(!1);i.useEffect(()=>{h.get("/checkin/today").then(t=>{t.data&&w(!0)}).catch(()=>{})},[]);const z=t=>{if(t==="all_good"){x(["all_good"]);return}x(s=>{const l=s.filter(g=>g!=="all_good");return s.includes(t)?l.filter(g=>g!==t):[...l,t]})},W=async()=>{var t;if(!(!r||!n)){p(!0);try{const s=await h.post("/checkin",{feeling:r,time_available:n,life_flags:c});try{const l=await h.get("/plans/today");(t=l.data)!=null&&t.today&&f(l.data.today)}catch{}s.data.adjustment?y(s.data.adjustment):(o==null||o(),d("/"))}finally{p(!1)}}};if(k)return e.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-base)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24,gap:16,maxWidth:480,margin:"0 auto",width:"100%",boxSizing:"border-box"},children:[e.jsx("p",{style:{fontSize:18,fontWeight:700,color:"var(--text-primary)",textAlign:"center"},children:"You've already checked in today"}),e.jsx("button",{onClick:()=>d("/"),style:{background:"var(--accent)",color:"#000",fontWeight:700,borderRadius:14,padding:"16px 32px",border:"none",cursor:"pointer"},children:"Go to Dashboard"})]});if(j){const t=(a==null?void 0:a.type)==="strength"?"/log-lift":"/log-run";return e.jsx("div",{style:{minHeight:"100vh",background:"var(--bg-base)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24,gap:20,textAlign:"center",maxWidth:480,margin:"0 auto",width:"100%",boxSizing:"border-box"},children:e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:20,padding:32,width:"100%"},children:[e.jsx("p",{style:{fontSize:22,fontWeight:900,color:"var(--text-primary)",marginBottom:8},children:"Let's stretch first"}),e.jsx("p",{style:{fontSize:14,color:"var(--text-muted)",lineHeight:1.6,marginBottom:28},children:"A quick pre-run stretch reduces injury risk and gets your muscles ready. Takes about 5 minutes."}),e.jsx("button",{onClick:()=>d("/stretches/session?type=pre"),style:{width:"100%",background:"var(--accent)",color:"#000",fontWeight:900,borderRadius:14,padding:"18px",border:"none",cursor:"pointer",fontSize:16,marginBottom:12},children:"Start Stretching"}),e.jsx("button",{onClick:()=>{o==null||o(),d(t)},style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)",fontSize:14,padding:"8px 0"},children:"Skip, go straight to workout"})]})})}return b?e.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-base)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:24,gap:20,textAlign:"center",maxWidth:480,margin:"0 auto",width:"100%",boxSizing:"border-box"},children:[e.jsx("p",{style:{fontSize:16,lineHeight:1.6,color:"var(--text-primary)",maxWidth:340},children:b}),a&&e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:20,width:"100%",textAlign:"left"},children:[e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:10},children:"Today's Workout"}),e.jsx("p",{style:{fontSize:18,fontWeight:800,color:"var(--text-primary)",marginBottom:4,textTransform:"capitalize"},children:a.type||"Run"}),a.distance&&e.jsxs("p",{style:{fontSize:14,color:"var(--text-muted)"},children:[a.distance," miles"]}),a.pace&&e.jsx("p",{style:{fontSize:14,color:"var(--text-muted)"},children:a.pace}),a.notes&&e.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",marginTop:8,lineHeight:1.5},children:a.notes})]}),e.jsx("button",{onClick:()=>S(!0),style:{background:"var(--accent)",color:"#000",fontWeight:900,borderRadius:14,padding:"18px 48px",border:"none",cursor:"pointer",fontSize:16},children:"Let's go"})]}):e.jsxs("div",{style:{minHeight:"100vh",background:"var(--bg-base)",padding:"24px 20px",paddingBottom:100,maxWidth:480,margin:"0 auto",boxSizing:"border-box",width:"100%"},children:[e.jsx("h1",{style:{fontWeight:900,fontSize:26,color:"var(--text-primary)",marginBottom:4},children:"Morning Check-In"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,marginBottom:28},children:"3 taps â€” I'll adjust your plan around your day."}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("p",{style:{fontWeight:700,color:"var(--text-primary)",marginBottom:12},children:"How are you feeling?"}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:6},children:B.map(t=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,flex:1},children:[e.jsx("button",{onClick:()=>v(t.value),style:{width:62,height:62,borderRadius:"50%",border:r===t.value?"2.5px solid var(--accent)":"2.5px solid transparent",background:r===t.value?"var(--accent-dim)":"var(--bg-input)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,boxShadow:r===t.value?"0 0 12px rgba(234,179,8,0.35)":"none",transition:"all 0.2s",flexShrink:0},children:e.jsx("img",{src:t.img,alt:t.label,style:{width:46,height:46,objectFit:"cover",borderRadius:"50%",filter:r===t.value?"brightness(1.1)":"brightness(0.7)",transition:"filter 0.2s"}})}),e.jsx("span",{style:{fontSize:10,fontWeight:700,textAlign:"center",color:r===t.value?"var(--accent)":"var(--text-muted)"},children:t.label})]},t.value))})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("p",{style:{fontWeight:700,color:"var(--text-primary)",marginBottom:12},children:"How much time do you have to workout?"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:R.map(t=>e.jsx("button",{onClick:()=>m(t.value),style:{padding:"10px 16px",borderRadius:12,border:`2px solid ${n===t.value?"var(--accent)":"var(--border-subtle)"}`,background:n===t.value?"var(--accent-dim)":"var(--bg-card)",color:n===t.value?"var(--accent)":"var(--text-muted)",fontWeight:700,fontSize:14,cursor:"pointer"},children:t.label},t.value))})]}),e.jsxs("div",{style:{marginBottom:32},children:[e.jsx("p",{style:{fontWeight:700,color:"var(--text-primary)",marginBottom:12},children:"Anything going on?"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:I.map(t=>e.jsx("button",{onClick:()=>z(t.value),style:{padding:"10px 16px",borderRadius:12,border:`2px solid ${c.includes(t.value)?"var(--accent)":"var(--border-subtle)"}`,background:c.includes(t.value)?"var(--accent-dim)":"var(--bg-card)",color:c.includes(t.value)?"var(--accent)":"var(--text-muted)",fontWeight:700,fontSize:14,cursor:"pointer"},children:t.label},t.value))})]}),e.jsx("button",{onClick:W,disabled:!r||!n||u,style:{width:"100%",background:r&&n?"var(--accent)":"var(--bg-input)",color:"#000",fontWeight:900,fontSize:17,borderRadius:16,padding:"18px",border:"none",cursor:"pointer",opacity:u?.6:1},children:u?"Adjusting your plan...":"Done"})]})}export{_ as default};
