import{d as T,r as a,a as l,j as e}from"./index-BaOvKJ5T.js";import Ce from"./PRWall-hX6yYAOF.js";import _e from"./Badges-DHdVpvOQ.js";import{L as ze}from"./LoadingRunner-C88D-dCI.js";import{X as ae}from"./x-CfSn8Zjf.js";import{C as Re}from"./camera-BJus93kG.js";import{H as Te}from"./heart-3fq0JSVE.js";import{F as Me}from"./flame-DPoPXVJY.js";import{F as We}from"./footprints-DulFK09q.js";import{C as Le}from"./circle-check-CaWoBECg.js";import"./pencil-CY6no0T_.js";import"./AchievementUnlock-BnW6bq5U.js";import"./mountain-dPlc4GeE.js";import"./zap-DqMj3eMs.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],te=T("ChevronDown",Ie);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],se=T("ChevronUp",$e);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Fe=T("MessageCircle",De);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Be=T("Send",Ae);function Ee({activityId:o,activityType:c,onClose:u}){const[h,N]=a.useState([]),[x,m]=a.useState(""),[M,y]=a.useState(!1),w=a.useRef(null);a.useEffect(()=>{l.get(`/social/${c}/${o}/comments`).then(r=>{N(r.data.comments||[])})},[o,c]),a.useEffect(()=>{var r;(r=w.current)==null||r.scrollIntoView({behavior:"smooth"})},[h]);const b=async()=>{if(x.trim()){y(!0);try{const r=await l.post(`/social/${c}/${o}/comments`,{content:x.trim()});N(f=>[...f,r.data.comment]),m("")}catch{}finally{y(!1)}}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end",style:{background:"rgba(0,0,0,0.7)"},onClick:u,children:e.jsxs("div",{className:"w-full rounded-t-2xl flex flex-col",style:{background:"var(--bg-card)",maxHeight:"70vh"},onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b",style:{borderColor:"var(--border-subtle)"},children:[e.jsx("span",{className:"font-bold text-sm",style:{color:"var(--text-primary)"},children:"Comments"}),e.jsx("button",{onClick:u,children:e.jsx(ae,{size:18,style:{color:"var(--text-muted)"}})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-3 space-y-4",children:[h.length===0&&e.jsx("p",{className:"text-center py-8 text-sm",style:{color:"var(--text-muted)"},children:"No comments yet. Be the first."}),h.map(r=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{style:{width:28,height:28,borderRadius:"50%",background:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900,fontSize:11,color:"#000",flexShrink:0},children:(r.user_name||"A")[0].toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-xs font-bold",style:{color:"var(--text-primary)"},children:r.user_name}),e.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:new Date(r.created_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),e.jsx("p",{className:"text-sm mt-0.5",style:{color:"var(--text-muted)"},children:r.content})]})]},r.id)),e.jsx("div",{ref:w})]}),e.jsxs("div",{className:"px-4 py-3 border-t flex gap-2 items-center",style:{borderColor:"var(--border-subtle)"},children:[e.jsx("input",{value:x,onChange:r=>m(r.target.value),onKeyDown:r=>r.key==="Enter"&&b(),placeholder:"Add a comment...",maxLength:280,className:"flex-1 rounded-xl px-3 py-2 text-sm",style:{background:"var(--bg-input)",border:"1px solid var(--border-subtle)",color:"var(--text-primary)"}}),e.jsx("button",{onClick:b,disabled:M||!x.trim(),style:{background:"var(--accent)",border:"none",borderRadius:10,padding:"8px 14px",cursor:"pointer"},children:e.jsx(Be,{size:14,color:"#000"})})]})]})})}function Pe({src:o,onClose:c}){return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(0,0,0,0.95)"},onClick:c,children:[e.jsx("button",{className:"absolute top-5 right-5",onClick:c,children:e.jsx(ae,{size:24,color:"white"})}),e.jsx("img",{src:o,alt:"Activity photo",style:{maxWidth:"100%",maxHeight:"90vh",objectFit:"contain",borderRadius:12},onClick:u=>u.stopPropagation()})]})}function R(o,c){return c==="miles"?`${Number(o).toFixed(o%1===0?0:1)} miles`:c==="steps"?`${Math.round(o).toLocaleString()} steps`:`${Math.round(o)} days`}function st(){const[o,c]=a.useState("challenges"),[u,h]=a.useState(null),[N,x]=a.useState(!0),[m,M]=a.useState([]),[y,w]=a.useState([]),[b,r]=a.useState({steps:0,goal:1e4,date:""}),[f,re]=a.useState({days:[],weekTotal:0,goal:1e4}),[ne,F]=a.useState(!1),[A,B]=a.useState(""),[le,oe]=a.useState(null),[E,ie]=a.useState(!0),[P,W]=a.useState([]),[U,G]=a.useState(null),[L,H]=a.useState(null),[V,I]=a.useState(null),[J,de]=a.useState({}),[O,Y]=a.useState(!1),[i,v]=a.useState({name:"",type:"running",target_value:"",description:""}),[$,q]=a.useState(!1),[j,ce]=a.useState(null),k=[{type:"running",label:"Running",unit:"miles",placeholder:"e.g. 50",hint:"Total miles to run"},{type:"walking",label:"Walking",unit:"miles",placeholder:"e.g. 30",hint:"Total miles to walk"},{type:"steps",label:"Steps",unit:"steps",placeholder:"e.g. 100000",hint:"Total steps to hit"},{type:"gym_time",label:"Gym Time",unit:"minutes",placeholder:"e.g. 600",hint:"Total minutes in the gym"},{type:"streak",label:"Workout Streak",unit:"days",placeholder:"e.g. 30",hint:"Consecutive active days"},{type:"elevation",label:"Elevation Climb",unit:"feet",placeholder:"e.g. 10000",hint:"Total feet of elevation gain"},{type:"workouts",label:"Most Workouts",unit:"sessions",placeholder:"e.g. 20",hint:"Total workout sessions"},{type:"custom",label:"Custom",unit:"units",placeholder:"e.g. 100",hint:"Your own challenge metric"}];async function pe(){const s=k.find(d=>d.type===i.type);if(!(!i.name.trim()||!i.target_value)){q(!0);try{await l.post("/challenges/create",{name:i.name,description:i.description,type:i.type,target_value:Number(i.target_value),unit:(s==null?void 0:s.unit)||"units"}),Y(!1),v({name:"",type:"running",target_value:"",description:""}),await C()}finally{q(!1)}}}async function C(){var s,d,p,t,n;x(!0);try{const[S,g,be,fe,ve,D,je,ke]=await Promise.all([l.get("/challenges"),l.get("/challenges/my"),l.get("/challenges/steps/today"),l.get("/challenges/steps/week"),l.get("/challenges/feed"),l.get("/runs"),l.get("/users/goal").catch(()=>({data:{}})),l.get("/auth/me/streak").catch(()=>({data:{}}))]);M(((s=S.data)==null?void 0:s.challenges)||[]),w(((d=g.data)==null?void 0:d.challenges)||[]),r(be.data||{steps:0,goal:1e4,date:""}),re(fe.data||{days:[],weekTotal:0,goal:1e4}),W(((p=ve.data)==null?void 0:p.feed)||[]),G(new Date),ce(ke.data||{});const Se=Array.isArray(D.data)?D.data:((t=D.data)==null?void 0:t.runs)||[],Z=new Date,Ne=Z.getMonth(),we=Z.getFullYear(),Q=Se.filter(_=>{const z=new Date((_.date||_.created_at||"")+"T12:00:00");return z.getMonth()===Ne&&z.getFullYear()===we}).reduce((_,z)=>_+Number(z.distance_miles||0),0),ee=Number(((n=je.data)==null?void 0:n.miles)||100);h({miles:Q,goal:ee,pct:Math.min(100,Q/ee*100)})}finally{x(!1)}}async function K(){var s;try{const d=await l.get("/challenges/feed");W(((s=d.data)==null?void 0:s.feed)||[]),G(new Date)}catch{}}const ue=async s=>{try{const d=await l.post("/social/like",{activity_id:s.id,activity_type:s._type});W(p=>p.map(t=>t.id===s.id?{...t,user_liked:d.data.liked,like_count:d.data.count}:t))}catch{}},xe=async s=>{var d;if(J[s.id]){I(J[s.id]);return}try{const p=await l.get(`/social/${s._type}/${s.id}/photo`);(d=p.data.media)!=null&&d.data&&(de(t=>({...t,[s.id]:p.data.media.data})),I(p.data.media.data))}catch{}};a.useEffect(()=>{C();const s=setInterval(K,24*60*60*1e3);return()=>clearInterval(s)},[]);const me=a.useMemo(()=>m.filter(s=>s.is_featured),[m]),ge=a.useMemo(()=>m.filter(s=>!s.joined),[m]);async function X(s){await l.post(`/challenges/${s}/join`,{}),await l.post("/challenges/sync",{}),await C()}async function he(){const s=Number(A);!Number.isFinite(s)||s<0||(await l.post("/challenges/steps",{steps:s}),await l.post("/challenges/sync",{}),B(""),F(!1),await C())}function ye(){var s,d,p;return N?e.jsx(ze,{message:"Loading challenges"}):e.jsxs("div",{className:"space-y-5",children:[j!==null&&e.jsx("div",{className:"rounded-2xl p-4 mb-2",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{size:22,color:"#EAB308"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-black",style:{color:"var(--text-primary)"},children:j.currentStreak>0?`${j.currentStreak}-day streak`:"Start your streak today"}),j.bestStreak>0&&e.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:["Best: ",j.bestStreak," days"]})]})]})}),e.jsxs("section",{children:[e.jsx("h3",{className:"mb-3 text-sm font-bold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Featured Courses"}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:me.map(t=>{const n=Math.min(100,Number(t.progress||0)/Number(t.target_value||1)*100);return e.jsxs("div",{className:"group relative flex-shrink-0 rounded-xl p-3",style:{width:100,minHeight:112,border:`2px solid ${t.badge_color||"var(--accent)"}`,background:"var(--bg-card)"},children:[e.jsx("div",{className:"flex items-center justify-center rounded-xl",style:{height:56,background:"var(--bg-input)"},children:e.jsx("span",{className:"text-lg font-black",style:{color:t.badge_color||"var(--accent)"},children:t.unit==="miles"?Number(t.target_value).toFixed(t.target_value%1===0?0:1):Math.round(t.target_value/1e3)})}),e.jsx("p",{className:"mt-2 text-[11px] font-bold leading-tight",style:{color:"var(--text-primary)"},children:t.name}),e.jsx("p",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:R(t.target_value,t.unit)}),t.joined?e.jsxs("p",{className:"mt-1 text-[10px] font-semibold",style:{color:"var(--accent)"},children:[Math.round(n),"% complete"]}):e.jsx("button",{onClick:()=>X(t.id),className:"absolute inset-x-2 bottom-2 rounded-lg px-2 py-1 text-[10px] font-bold opacity-100 transition group-hover:opacity-100",style:{background:"var(--accent)",color:"#000"},children:"Join"})]},t.id)})})]}),u&&e.jsxs("section",{className:"rounded-2xl p-4",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider mb-2",style:{color:"var(--text-muted)"},children:"Monthly Challenge"}),e.jsxs("p",{className:"text-xl font-black",style:{color:"var(--text-primary)"},children:[u.miles.toFixed(1)," / ",u.goal," miles"]}),e.jsx("div",{className:"h-2 rounded-full mt-2",style:{background:"var(--bg-input)"},children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${u.pct}%`,background:"var(--accent)"}})})]}),e.jsxs("section",{className:"rounded-2xl p-4",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(We,{size:16,style:{color:"var(--accent)"}}),e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Steps This Week"})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Today"}),e.jsxs("p",{className:"text-2xl font-black",style:{color:"var(--text-primary)"},children:[Number(b.steps||0).toLocaleString()," steps"]}),e.jsxs("p",{className:"mb-3 text-xs",style:{color:"var(--text-muted)"},children:["Goal: ",Number(b.goal||1e4).toLocaleString()]}),e.jsx("div",{className:"mb-3 flex items-end gap-2",children:(f.days||[]).map(t=>{const n=Math.min(1,(t.steps||0)/(t.goal||f.goal||1e4)),S=Math.max(8,Math.round(n*60)),g=(t.steps||0)>=(t.goal||f.goal||1e4);return e.jsxs("div",{className:"flex flex-1 flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full rounded-md",style:{height:S,background:g?"#22c55e":"#EAB308",minWidth:10},title:`${t.date}: ${t.steps}`}),e.jsx("span",{className:"text-[10px]",style:{color:"var(--text-muted)"},children:t.date.slice(5)})]},t.date)})}),ne?e.jsxs("div",{className:"flex items-center gap-2 rounded-xl p-2",style:{background:"var(--bg-input)"},children:[e.jsx("input",{type:"number",placeholder:"Steps today",value:A,onChange:t=>B(t.target.value),className:"flex-1 rounded-lg px-3 py-2 text-sm",style:{background:"var(--bg-card)",color:"var(--text-primary)",border:"1px solid var(--border-subtle)"}}),e.jsx("button",{className:"rounded-lg px-3 py-2 text-xs font-bold",style:{background:"var(--accent)",color:"#000"},onClick:he,children:"Save"})]}):e.jsx("button",{className:"rounded-xl px-3 py-2 text-xs font-bold",style:{background:"var(--accent)",color:"#000"},onClick:()=>F(!0),children:"Log today's steps"}),e.jsx("p",{className:"mt-2 text-xs",style:{color:"var(--text-muted)"},children:"Connect Garmin to sync automatically"})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"mb-3 text-sm font-bold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"My Challenges"}),e.jsxs("div",{className:"space-y-2",children:[y.length===0&&e.jsx("div",{className:"rounded-xl p-3 text-sm",style:{background:"var(--bg-card)",color:"var(--text-muted)"},children:"Join a challenge to start tracking progress."}),y.map(t=>{const n=Math.min(100,Number(t.progress||0)/Number(t.target_value||1)*100),S=!!t.completed_at||n>=100,g=le===t.id;return e.jsxs("button",{onClick:()=>oe(g?null:t.id),className:"w-full rounded-xl p-3 text-left",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-sm font-bold",style:{color:"var(--text-primary)"},children:t.name}),S&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-semibold",style:{color:"#22c55e"},children:[e.jsx(Le,{size:14}),t.completed_at?new Date(t.completed_at).toLocaleDateString():"Completed"]})]}),e.jsx("div",{className:"h-2 w-full rounded-full",style:{background:"var(--bg-input)"},children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${n}%`,background:"var(--accent)"}})}),e.jsxs("p",{className:"mt-2 text-xs",style:{color:"var(--text-muted)"},children:[R(t.progress||0,t.unit)," of ",R(t.target_value,t.unit)," • ",Math.round(n),"% complete"]}),g&&e.jsx("p",{className:"mt-2 text-xs leading-relaxed",style:{color:"var(--text-muted)"},children:t.description})]},t.id)})]})]}),e.jsxs("section",{className:"rounded-xl",style:{background:"var(--bg-card)",border:"1px solid var(--border-subtle)"},children:[e.jsxs("button",{onClick:()=>ie(t=>!t),className:"flex w-full items-center justify-between p-3",style:{color:"var(--text-primary)"},children:[e.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Browse All"}),E?e.jsx(se,{size:16}):e.jsx(te,{size:16})]}),E&&e.jsx("div",{className:"space-y-2 px-3 pb-3",children:ge.map(t=>e.jsx("div",{className:"rounded-lg p-3",style:{background:"var(--bg-input)"},children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:t.name}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:R(t.target_value,t.unit)})]}),e.jsx("button",{onClick:()=>X(t.id),className:"rounded-lg px-3 py-1.5 text-xs font-bold",style:{background:"var(--accent)",color:"#000"},children:"Join"})]})},t.id))})]}),e.jsxs("section",{style:{borderRadius:14,border:"1px solid var(--border-subtle)",overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>Y(t=>!t),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"var(--bg-card)",border:"none",cursor:"pointer"},children:[e.jsx("span",{style:{fontSize:13,fontWeight:700,color:"var(--text-primary)"},children:"Create a Challenge"}),O?e.jsx(se,{size:16,color:"var(--text-muted)"}):e.jsx(te,{size:16,color:"var(--text-muted)"})]}),O&&e.jsxs("div",{style:{background:"var(--bg-card)",padding:"0 16px 20px",display:"flex",flexDirection:"column",gap:14},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:10},children:"Challenge Type"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:k.map(t=>e.jsx("button",{onClick:()=>v(n=>({...n,type:t.type,name:n.name||t.label+" Challenge"})),style:{padding:"7px 14px",borderRadius:20,fontSize:12,fontWeight:700,border:"none",cursor:"pointer",background:i.type===t.type?"var(--accent)":"var(--bg-input)",color:i.type===t.type?"#000":"var(--text-muted)"},children:t.label},t.type))}),e.jsx("p",{style:{fontSize:11,color:"var(--text-muted)",marginTop:6},children:(s=k.find(t=>t.type===i.type))==null?void 0:s.hint})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:6},children:"Challenge Name"}),e.jsx("input",{value:i.name,onChange:t=>v(n=>({...n,name:t.target.value})),placeholder:"Name your challenge",style:{width:"100%",background:"var(--bg-input)",border:"1px solid var(--border-subtle)",borderRadius:10,padding:"10px 12px",fontSize:14,color:"var(--text-primary)",boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsxs("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:6},children:["Target (",(d=k.find(t=>t.type===i.type))==null?void 0:d.unit,")"]}),e.jsx("input",{type:"number",value:i.target_value,onChange:t=>v(n=>({...n,target_value:t.target.value})),placeholder:(p=k.find(t=>t.type===i.type))==null?void 0:p.placeholder,style:{width:"100%",background:"var(--bg-input)",border:"1px solid var(--border-subtle)",borderRadius:10,padding:"10px 12px",fontSize:14,color:"var(--text-primary)",boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase",marginBottom:6},children:"Description (optional)"}),e.jsx("textarea",{rows:2,value:i.description,onChange:t=>v(n=>({...n,description:t.target.value})),placeholder:"What's this challenge about?",style:{width:"100%",background:"var(--bg-input)",border:"1px solid var(--border-subtle)",borderRadius:10,padding:"10px 12px",fontSize:14,color:"var(--text-primary)",boxSizing:"border-box",resize:"none"}})]}),e.jsx("button",{onClick:pe,disabled:$||!i.name.trim()||!i.target_value,style:{width:"100%",background:"var(--accent)",color:"#000",fontWeight:900,borderRadius:12,padding:"14px",border:"none",cursor:"pointer",fontSize:15,opacity:$?.6:1},children:$?"Creating...":"Create Challenge"})]})]})]})}return e.jsxs("div",{className:"rounded-2xl p-4",style:{background:"var(--bg-card)"},children:[e.jsx("div",{style:{display:"flex",gap:8,marginBottom:20},children:["challenges","prs","badges","feed"].map(s=>e.jsx("button",{onClick:()=>c(s),style:{padding:"8px 14px",borderRadius:20,fontSize:13,fontWeight:700,border:"none",cursor:"pointer",background:o===s?"var(--accent)":"var(--bg-card)",color:o===s?"#000":"var(--text-muted)"},children:s==="challenges"?"Challenges":s==="prs"?"PRs":s==="badges"?"Badges":"Feed"},s))}),o==="challenges"&&ye(),o==="prs"&&e.jsx(Ce,{}),o==="badges"&&e.jsx(_e,{}),o==="feed"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[e.jsx("p",{style:{fontSize:11,fontWeight:700,color:"var(--text-muted)",letterSpacing:1,textTransform:"uppercase"},children:"Community Activity"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[U&&e.jsxs("span",{style:{fontSize:10,color:"var(--text-muted)"},children:["Updated ",U.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]}),e.jsx("button",{onClick:K,style:{fontSize:10,fontWeight:700,color:"var(--accent)",background:"var(--accent-dim)",border:"none",borderRadius:6,padding:"3px 8px",cursor:"pointer"},children:"Refresh"})]})]}),P.length===0&&e.jsx("div",{style:{textAlign:"center",padding:32,color:"var(--text-muted)",fontSize:14},children:"No activity yet. Log a run or workout to show up here."}),P.map(s=>e.jsxs("div",{style:{background:"var(--bg-base)",borderRadius:10,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{width:28,height:28,borderRadius:"50%",background:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:900,fontSize:11,color:"#000",flexShrink:0},children:(s.user_name||"A")[0].toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.user_name||"Athlete"}),e.jsx("span",{style:{fontSize:11,color:"var(--text-muted)",flexShrink:0},children:s._type==="run"?`ran ${s.distance_miles?Number(s.distance_miles).toFixed(1)+" mi":""}${s.duration_seconds>0?" · "+Math.floor(s.duration_seconds/60)+"min":""}`:`logged ${s.set_count||0} sets`})]}),s.notes&&e.jsx("p",{style:{fontSize:10,color:"var(--text-muted)",marginTop:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.notes})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",flexShrink:0,gap:2},children:[e.jsx("span",{style:{fontSize:9,fontWeight:700,color:"var(--accent)",background:"var(--accent-dim)",padding:"2px 6px",borderRadius:5,textTransform:"uppercase"},children:s._type==="run"?s.surface||"Run":"Lift"}),e.jsx("span",{style:{fontSize:9,color:"var(--text-muted)"},children:new Date(s._ts).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),s.has_photo&&e.jsx("div",{style:{padding:"0 12px 8px"},children:e.jsxs("button",{onClick:()=>xe(s),style:{width:"100%",background:"var(--bg-input)",border:"none",borderRadius:8,padding:"6px 10px",display:"flex",alignItems:"center",gap:6,cursor:"pointer"},children:[e.jsx(Re,{size:12,style:{color:"var(--accent)"}}),e.jsx("span",{style:{fontSize:11,color:"var(--accent)",fontWeight:600},children:"View photo"})]})}),e.jsxs("div",{style:{borderTop:"1px solid var(--border-subtle)",display:"flex",alignItems:"center",padding:"6px 12px",gap:16},children:[e.jsxs("button",{onClick:()=>ue(s),style:{display:"flex",alignItems:"center",gap:4,background:"none",border:"none",cursor:"pointer",padding:"2px 0"},children:[e.jsx(Te,{size:14,fill:s.user_liked?"#EAB308":"none",style:{color:s.user_liked?"#EAB308":"var(--text-muted)",transition:"all 0.15s"}}),e.jsx("span",{style:{fontSize:11,color:s.user_liked?"var(--accent)":"var(--text-muted)",fontWeight:s.user_liked?700:400},children:s.like_count||0})]}),e.jsxs("button",{onClick:()=>H({id:s.id,type:s._type}),style:{display:"flex",alignItems:"center",gap:4,background:"none",border:"none",cursor:"pointer",padding:"2px 0"},children:[e.jsx(Fe,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{fontSize:11,color:"var(--text-muted)"},children:s.comment_count||0})]})]})]},s.id)),L&&e.jsx(Ee,{activityId:L.id,activityType:L.type,onClose:()=>H(null)}),V&&e.jsx(Pe,{src:V,onClose:()=>I(null)})]})]})}export{st as default};
