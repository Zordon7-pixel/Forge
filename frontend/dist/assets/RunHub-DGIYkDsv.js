import{b as R,u as S,r as l,j as e,a as j}from"./index-D4P1_Gkc.js";import T from"./Plan-CKqruNpD.js";import{L as N}from"./LoadingRunner-SwhLp4Vr.js";import{C as M,T as P}from"./trending-up-BDsRcs8d.js";import{Z as H}from"./zap-BwgH-OTq.js";import{H as L}from"./heart-FKLNgysA.js";import"./x-C-gq2N0i.js";const x=[{name:"Leg Swings",detail:"10 each side",icon:"FootprintIcon"},{name:"High Knees",detail:"30 seconds",icon:"ArrowUp"},{name:"Ankle Circles",detail:"10 each direction",icon:"RefreshCw"},{name:"Hip Circles",detail:"10 each direction",icon:"RotateCw"},{name:"Arm Swings",detail:"20 reps",icon:"Waves"}];function _(t,r){var s;let n=60;r&&(n+=10),Number((t==null?void 0:t.streak)||0)>=3&&(n+=10);const o=Number(((s=t==null?void 0:t.week)==null?void 0:s.miles)||0);return o<10&&(n+=10),o>30&&(n-=10),Math.max(30,Math.min(100,n))}function I(t){return t<50?"#ef4444":t<75?"#EAB308":"#22c55e"}function D(t,r){return t<50?r("run.takeItEasy"):t<75?r("run.goodToGo"):r("run.youAreReady")}function U(t,r,n){var s;const i=Number(((s=r==null?void 0:r.week)==null?void 0:s.miles)||0),o=Number((r==null?void 0:r.streak)||0);return i>30?"You've been grinding — keep today easy.":i<10?"Your legs are fresh — push the pace today.":o>=5?"Your consistency is strong — let's build on it.":"You're ready. Trust your training."}function Y({stepIndex:t,onNext:r,onSkip:n}){const{t:i}=S(),o=x[t],s=(t+1)/x.length*100;return e.jsxs("div",{className:"flex flex-col min-h-screen justify-between relative overflow-hidden",style:{background:"linear-gradient(135deg, var(--bg-base) 0%, rgba(0,0,0,0.3) 100%)",paddingBottom:80},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:"3px",background:"rgba(255,255,255,0.1)",zIndex:40},children:e.jsx("div",{style:{height:"100%",width:`${s}%`,background:"#EAB308",transition:"width 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 0 16px rgba(234, 179, 8, 0.6)"}})}),e.jsxs("div",{style:{paddingTop:16},children:[e.jsx("p",{style:{textAlign:"center",fontSize:13,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:1.2,margin:0,marginTop:16},children:"Warm-Up"}),e.jsxs("p",{style:{textAlign:"center",fontSize:13,color:"var(--text-muted)",margin:"4px 0 0"},children:[i("run.step")," ",t+1," ",i("run.of")," ",x.length]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 px-6",children:[e.jsx("div",{style:{width:120,height:120,borderRadius:"50%",border:"3px solid #EAB308",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:40,animation:"scale-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e.jsx("span",{style:{fontSize:56,fontWeight:900,color:"#EAB308"},children:t+1})}),e.jsx("h2",{style:{fontSize:48,fontWeight:900,textAlign:"center",color:"var(--text-primary)",margin:"0 0 16px",lineHeight:1.1,textTransform:"uppercase",letterSpacing:-1,animation:"fade-in 0.6s ease"},children:o.name}),e.jsx("p",{style:{fontSize:20,fontWeight:600,color:"#EAB308",margin:"0 0 32px",textAlign:"center"},children:o.detail}),e.jsx("p",{style:{fontSize:14,color:"var(--text-muted)",textAlign:"center",margin:0,fontStyle:"italic"},children:"Complete this movement, then tap Next"})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 px-4 py-6",style:{background:"linear-gradient(to top, rgba(0,0,0,0.5), transparent)"},children:e.jsxs("div",{className:"max-w-[480px] mx-auto",children:[e.jsx("button",{onClick:r,style:{width:"100%",padding:"20px 0",fontSize:16,fontWeight:800,textTransform:"uppercase",letterSpacing:1.2,borderRadius:24,border:"none",background:"#EAB308",color:"#000",cursor:"pointer",boxShadow:"0 8px 24px rgba(234, 179, 8, 0.3)",transition:"all 0.2s ease",marginBottom:12},onMouseEnter:a=>a.target.style.boxShadow="0 12px 32px rgba(234, 179, 8, 0.5)",onMouseLeave:a=>a.target.style.boxShadow="0 8px 24px rgba(234, 179, 8, 0.3)",children:t===x.length-1?i("run.finishWarmup"):i("run.next")}),e.jsx("button",{onClick:n,style:{width:"100%",textAlign:"center",background:"none",border:"none",color:"var(--text-muted)",fontSize:12,cursor:"pointer",padding:"8px 0",transition:"color 0.2s"},onMouseEnter:a=>a.target.style.color="var(--text-primary)",onMouseLeave:a=>a.target.style.color="var(--text-muted)",children:i("run.skipWarmup")})]})}),e.jsx("style",{children:`
        @keyframes scale-in {
          from { transform: scale(0.8); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
      `})]})}function F({onStartRun:t}){var k,w,z,W;const{t:r}=S(),[n,i]=l.useState(null),[o,s]=l.useState(null),[a,h]=l.useState(null),[f,b]=l.useState(!0);if(l.useEffect(()=>{(async()=>{var m;try{const[y,v,g]=await Promise.all([j.get("/auth/me/stats").catch(()=>({data:null})),j.get("/checkin/today").catch(()=>({data:null})),j.get("/plans/current").catch(()=>({data:null}))]);i(y==null?void 0:y.data),s(v==null?void 0:v.data),h(((m=g==null?void 0:g.data)==null?void 0:m.plan)||(g==null?void 0:g.data))}finally{b(!1)}})()},[]),f)return e.jsx(N,{message:"Assessing readiness"});const c=_(n,o),u=I(c),A=D(c,r),B=U(c,n),E=Number(((k=n==null?void 0:n.week)==null?void 0:k.miles)||0),C=Number((n==null?void 0:n.streak)||0);let p=null;if((W=(z=(w=a==null?void 0:a.plan_json)==null?void 0:w.weeks)==null?void 0:z[0])!=null&&W.days){const d=new Date,m=d.getDay()===0?6:d.getDay()-1;p=a.plan_json.weeks[0].days[m]}return e.jsx("div",{style:{background:"linear-gradient(135deg, var(--bg-base) 0%, rgba(0,0,0,0.3) 100%)",minHeight:"100vh",paddingBottom:100},children:e.jsxs("div",{className:"px-4 pt-6 max-w-[480px] mx-auto space-y-4",children:[e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:24,border:"1px solid var(--border-subtle)"},children:[e.jsx("p",{style:{fontSize:13,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",margin:"0 0 12px",letterSpacing:1},children:r("run.readiness")}),e.jsx("p",{style:{fontSize:32,fontWeight:900,color:u,margin:"0 0 16px"},children:A}),e.jsx("div",{style:{height:8,background:"var(--bg-input)",borderRadius:4,overflow:"hidden",marginBottom:12},children:e.jsx("div",{style:{height:"100%",width:`${c}%`,background:u,borderRadius:4,transition:"width 0.8s ease",boxShadow:`0 0 12px ${u}44`}})}),e.jsx("p",{style:{fontSize:14,color:"var(--text-muted)",margin:0,fontStyle:"italic"},children:B})]}),p&&e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:16,border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx(M,{size:18,style:{color:"#EAB308"}}),e.jsx("p",{style:{fontSize:13,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",margin:0,letterSpacing:.8},children:r("run.todayPlan")})]}),e.jsx("p",{style:{fontSize:18,fontWeight:800,color:"var(--text-primary)",margin:"0 0 4px",textTransform:"capitalize"},children:p.workout_type||p.type||"Rest Day"}),p.distance&&e.jsxs("p",{style:{fontSize:13,color:"var(--text-muted)",margin:0},children:["Target: ",p.distance," miles"]})]}),e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:16,border:"1px solid var(--border-subtle)",display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(P,{size:16,style:{color:"#EAB308"}}),e.jsx("p",{style:{fontSize:12,color:"var(--text-muted)",margin:0,fontWeight:600},children:"Week Miles"})]}),e.jsx("p",{style:{fontSize:24,fontWeight:900,color:"var(--text-primary)",margin:0},children:E.toFixed(1)})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(H,{size:16,style:{color:"#EAB308"}}),e.jsx("p",{style:{fontSize:12,color:"var(--text-muted)",margin:0,fontWeight:600},children:"Streak"})]}),e.jsxs("p",{style:{fontSize:24,fontWeight:900,color:"var(--text-primary)",margin:0},children:[C," days"]})]})]}),o&&e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:16,padding:16,border:"1px solid var(--border-subtle)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx(L,{size:18,style:{color:"#EAB308"}}),e.jsx("p",{style:{fontSize:13,fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",margin:0,letterSpacing:.8},children:r("run.feeling")})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[o.feeling&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,color:"var(--text-muted)",margin:"0 0 4px"},children:"Feeling"}),e.jsxs("p",{style:{fontSize:14,fontWeight:700,color:"var(--accent)",margin:0},children:[o.feeling,"/5"]})]}),o.time_available&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:11,color:"var(--text-muted)",margin:"0 0 4px"},children:"Time Available"}),e.jsxs("p",{style:{fontSize:14,fontWeight:700,color:"var(--accent)",margin:0},children:[o.time_available," min"]})]})]})]}),e.jsx("button",{onClick:t,style:{width:"100%",padding:"20px 0",fontSize:16,fontWeight:800,textTransform:"uppercase",letterSpacing:1.2,borderRadius:24,border:"none",background:"#EAB308",color:"#000",cursor:"pointer",boxShadow:"0 8px 24px rgba(234, 179, 8, 0.3)",transition:"all 0.2s ease",marginTop:24},onMouseEnter:d=>d.target.style.boxShadow="0 12px 32px rgba(234, 179, 8, 0.5)",onMouseLeave:d=>d.target.style.boxShadow="0 8px 24px rgba(234, 179, 8, 0.3)",children:r("run.startRun")})]})})}function Q(){const t=R(),{t:r}=S(),[n,i]=l.useState("run"),[o,s]=l.useState("warmup-steps"),[a,h]=l.useState(0),f=()=>{a===x.length-1?s("warmup-done"):h(u=>u+1)},b=()=>{s("warmup-done")},c=()=>{t("/log-run")};return n==="plan"?e.jsxs("div",{children:[e.jsxs("div",{className:"sticky top-0 z-10 flex gap-0 px-4 pt-2 border-b",style:{borderColor:"var(--border-subtle)",background:"var(--bg-base)"},children:[e.jsx("button",{onClick:()=>i("run"),style:{flex:1,padding:"12px 0",fontSize:14,fontWeight:700,color:"var(--text-muted)",background:"none",border:"none",borderBottom:"2px solid transparent",cursor:"pointer",transition:"all 0.2s"},children:"Run"}),e.jsx("button",{onClick:()=>i("plan"),style:{flex:1,padding:"12px 0",fontSize:14,fontWeight:700,color:"#EAB308",background:"none",border:"none",borderBottom:"2px solid #EAB308",cursor:"pointer",transition:"all 0.2s"},children:"Plan"})]}),e.jsx("div",{className:"pt-4",children:e.jsx(T,{})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"sticky top-0 z-10 flex gap-0 px-4 pt-2 border-b",style:{borderColor:"var(--border-subtle)",background:"var(--bg-base)"},children:[e.jsx("button",{onClick:()=>i("run"),style:{flex:1,padding:"12px 0",fontSize:14,fontWeight:700,color:"#EAB308",background:"none",border:"none",borderBottom:"2px solid #EAB308",cursor:"pointer",transition:"all 0.2s"},children:"Run"}),e.jsx("button",{onClick:()=>i("plan"),style:{flex:1,padding:"12px 0",fontSize:14,fontWeight:700,color:"var(--text-muted)",background:"none",border:"none",borderBottom:"2px solid transparent",cursor:"pointer",transition:"all 0.2s"},children:"Plan"})]}),o==="warmup-steps"&&e.jsx(Y,{stepIndex:a,onNext:f,onSkip:b}),o==="warmup-done"&&e.jsx(F,{onStartRun:c})]})}export{Q as default};
