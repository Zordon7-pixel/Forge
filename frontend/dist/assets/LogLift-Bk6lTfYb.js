import{b as W,r as c,a as m,j as e}from"./index-JwZocPeU.js";const H=[{key:"chest",label:"Chest"},{key:"back",label:"Back"},{key:"legs",label:"Legs"},{key:"shoulders",label:"Shoulders"},{key:"arms",label:"Arms"},{key:"core",label:"Core"}],h="#374151",n="#EAB308";function L({highlight:o,sex:i="male"}){const x=u=>o==="full"||o===u?n:h,r=i==="female";return e.jsxs("svg",{viewBox:"0 0 60 90",width:"52",height:"78",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"30",cy:"9",r:"8",fill:h}),e.jsx("rect",{x:"27",y:"17",width:"6",height:"5",fill:h}),e.jsx("rect",{x:r?9:7,y:"20",width:"9",height:"24",rx:"4",fill:x("arms")}),e.jsx("rect",{x:r?42:44,y:"20",width:"9",height:"24",rx:"4",fill:x("arms")}),e.jsx("rect",{x:"16",y:"20",width:"28",height:"33",rx:"4",fill:h}),r&&e.jsx("rect",{x:"18",y:"34",width:"24",height:"8",rx:"2",fill:h}),(o==="shoulders"||o==="full")&&e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:r?9:7,y:"20",width:"9",height:"11",rx:"4",fill:n}),e.jsx("rect",{x:r?42:44,y:"20",width:"9",height:"11",rx:"4",fill:n}),e.jsx("rect",{x:"15",y:"20",width:"30",height:"8",rx:"3",fill:n})]}),(o==="chest"||o==="full")&&e.jsx("rect",{x:"18",y:"23",width:"24",height:"14",rx:"3",fill:n}),(o==="back"||o==="full")&&e.jsx("rect",{x:"16",y:"22",width:"28",height:"13",rx:"3",fill:n}),(o==="core"||o==="full")&&e.jsx("rect",{x:"18",y:"37",width:"24",height:"14",rx:"3",fill:n}),e.jsx("rect",{x:r?15:17,y:"53",width:r?13:11,height:"33",rx:"4",fill:x("legs")}),e.jsx("rect",{x:32,y:"53",width:r?13:11,height:"33",rx:"4",fill:x("legs")})]})}function U(){const o=W(),[i,x]=c.useState([]),[r,u]=c.useState(!1),[v,p]=c.useState(""),[d,$]=c.useState(null),[w,T]=c.useState("male"),[N,_]=c.useState(""),[f,F]=c.useState(null),[g,G]=c.useState("ai"),[l,k]=c.useState(null),[S,C]=c.useState(!1),[y,A]=c.useState(null);c.useEffect(()=>{m.get("/auth/me").then(t=>{var s;T(((s=t.data.user)==null?void 0:s.sex)||"male")}).catch(()=>{})},[]);const E=i[0]||"";c.useEffect(()=>{C(!0),A(null),m.get("/ai/workout-recommendation?date=today").then(t=>{var s;k(((s=t.data)==null?void 0:s.recommendation)||null)}).catch(t=>{console.error("Failed to fetch AI recommendation:",t),A("Could not generate recommendation"),k(null)}).finally(()=>C(!1))},[]);const B=t=>x(s=>{const a=s.includes(t)?s.filter(j=>j!==t):[...s,t],b=a[0]||"";return d&&d.muscle_group!==b&&$(null),a}),P=async()=>{var t,s;u(!0),p("");try{const b=((l==null?void 0:l.target)||"").split(/[,\/\s]+/).map(M=>M.trim().toLowerCase()).filter(Boolean),j=await m.post("/workouts/start",{muscle_groups:b.length?b:["full"]});o(`/workout/active/${j.data.session.id}`,{state:{exercises:(l==null?void 0:l.main)||[],workoutName:(l==null?void 0:l.workoutName)||""}})}catch(a){p(((s=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:s.error)||"Could not start workout. Try again."),u(!1)}},I=async()=>{var t,s;u(!0),p("");try{const a=await m.post("/workouts/start",{muscle_groups:i,exercise_name:(d==null?void 0:d.name)||""});o(`/workout/active/${a.data.session.id}`)}catch(a){p(((s=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:s.error)||"Could not start workout. Try again."),u(!1)}};return e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",style:{color:"var(--text-primary)"},children:"Start Workout"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Select the muscle groups you are targeting today"})]}),e.jsx("div",{className:"flex gap-2",children:["manual","ai"].map(t=>e.jsx("button",{onClick:()=>G(t),className:"rounded-full px-4 py-2 text-xs font-bold",style:{background:g===t?"var(--accent)":"var(--bg-input)",color:g===t?"#000":"var(--text-muted)"},children:t==="manual"?"Manual":"AI Recommends"},t))}),g==="ai"&&e.jsxs(e.Fragment,{children:[S&&e.jsx("div",{className:"rounded-2xl p-4",style:{background:"var(--bg-card)",color:"var(--text-muted)"},children:e.jsx("p",{className:"text-sm",children:"Generating your personalized workout..."})}),y&&e.jsx("div",{className:"rounded-2xl p-4",style:{background:"rgba(239,68,68,0.1)",color:"#ef4444",border:"1px solid rgba(239,68,68,0.3)"},children:e.jsx("p",{className:"text-sm",children:y})}),!S&&!l&&!y&&e.jsx("div",{className:"rounded-2xl p-4",style:{background:"var(--bg-card)",color:"var(--text-muted)"},children:e.jsx("p",{className:"text-sm",children:"No recommendation available yet. Check back later."})}),l&&e.jsxs("div",{className:"rounded-2xl p-4",style:{background:"#f8f2df",color:"#111",border:"1px solid #d6c9a0"},children:[e.jsxs("p",{className:"text-lg font-bold",children:[l.workoutName," — ",l.target]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Warmup:"})," ",(l.warmup||[]).join(", ")]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Main:"})," ",(l.main||[]).map(t=>`${t.name} ${t.sets}x${t.reps} (${t.rest})`).join(" • ")]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Recovery:"})," ",(l.recovery||[]).join(", ")]}),e.jsx("p",{className:"text-sm mt-2",children:l.explanation}),e.jsx("p",{className:"text-xs mt-1",children:l.restExplanation}),e.jsx("button",{onClick:P,disabled:r,className:"mt-3 w-full rounded-2xl py-4 text-base font-bold",style:{background:"var(--accent)",color:"#000",border:"none",cursor:"pointer",opacity:r?.6:1},children:r?"Starting...":"Start Workout"})]})]}),g==="manual"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[H.map(({key:t,label:s})=>{const a=i.includes(t);return e.jsxs("button",{onClick:()=>B(t),className:"flex flex-col items-center justify-between rounded-2xl py-3 px-2 transition-all",style:{background:a?"rgba(234,179,8,0.08)":"var(--bg-card)",border:`2px solid ${a?n:"var(--border-subtle)"}`,minHeight:110,boxShadow:a?"0 0 10px rgba(234,179,8,0.25)":"none"},children:[e.jsx(L,{highlight:t,sex:w}),e.jsx("span",{className:"text-xs font-semibold mt-1 capitalize",style:{color:a?n:"var(--text-muted)"},children:s})]},t)}),(()=>{const t=i.includes("full");return e.jsxs("button",{onClick:()=>B("full"),className:"col-span-3 flex items-center justify-center gap-4 rounded-2xl py-3 px-4 transition-all",style:{background:t?"rgba(234,179,8,0.08)":"var(--bg-card)",border:`2px solid ${t?n:"var(--border-subtle)"}`,minHeight:72,boxShadow:t?"0 0 10px rgba(234,179,8,0.25)":"none"},children:[e.jsx(L,{highlight:"full",sex:w}),e.jsx("span",{className:"text-sm font-bold",style:{color:t?n:"var(--text-muted)"},children:"Full Body"})]})})()]}),E&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"How much time do you have?"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["15","30","45","60","90+"].map(t=>e.jsxs("button",{type:"button",onClick:async()=>{var a;_(t);const s=await m.post("/ai/lift-plan",{bodyPart:E,timeAvailable:t,userId:"me"}).catch(()=>null);F(((a=s==null?void 0:s.data)==null?void 0:a.plan)||null)},className:"rounded-full px-3 py-1 text-xs font-semibold",style:{background:N===t?"var(--accent)":"var(--bg-input)",color:N===t?"#000":"var(--text-muted)"},children:[t," min"]},t))}),d&&e.jsxs("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:["Exercise: ",d.name]}),f&&e.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:[f.workoutName," · Estimated: ",f.estimatedTime]})]}),v&&e.jsx("p",{className:"text-sm",style:{color:"var(--accent)"},children:v}),e.jsx("button",{onClick:I,disabled:r||i.length===0,className:"w-full rounded-2xl py-4 text-lg font-bold disabled:opacity-60 transition-all",style:{background:"var(--accent)",color:"black"},children:r?"Starting...":"Begin Workout"})]})]})}export{U as default};
